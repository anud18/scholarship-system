
> scholarship-frontend@0.1.0 test
> jest --coverage --watchAll=false --passWithNoTests

 ‚ö† Warning: Next.js inferred your workspace root, but it may not be correct.
 We detected multiple lockfiles and selected the directory of /home/jotp/package-lock.json as the root directory.
 To silence this warning, set `outputFileTracingRoot` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
   See https://nextjs.org/docs/app/api-reference/config/next-config-js/output#caveats for more information.
 Detected additional lockfiles:
   * /home/jotp/scholarship-system/frontend/package-lock.json
   * /home/jotp/scholarship-system/package-lock.json

(node:1144929) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:1144928) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
PASS components/__tests__/notification-button.test.tsx
PASS components/__tests__/scholarship-timeline.test.tsx
  ‚óè Console

    console.log
      üåê Typed API Client (Browser mode - Nginx proxy)

      at new log (lib/api/typed-client.ts:32:13)

    console.log
      üåê API Client Browser mode - using relative path (Nginx proxy)

      at new log (lib/api/client.ts:41:15)

    console.log
      useScholarshipPermissions: fetchPermissions called for user: admin 1

      at log (hooks/use-scholarship-permissions.ts:27:13)

    console.log
      useScholarshipPermissions: Fetching allowed scholarships from API...

      at log (hooks/use-scholarship-permissions.ts:55:15)

    console.log
      ScholarshipTimeline: Starting fetch for user: admin 1

      at log (components/scholarship-timeline.tsx:136:15)

    console.log
      ScholarshipTimeline: Fetching scholarships for admin/college user { academicYear: undefined, semester: undefined }

      at log (components/scholarship-timeline.tsx:165:17)

    console.log
      ScholarshipTimeline: Raw scholarships data: []

      at log (components/scholarship-timeline.tsx:187:17)

    console.log
      filterScholarshipsByPermission: Called with scholarships: 0

      at log (hooks/use-scholarship-permissions.ts:138:15)

    console.log
      filterScholarshipsByPermission: User role: admin

      at log (hooks/use-scholarship-permissions.ts:142:15)

    console.log
      filterScholarshipsByPermission: Allowed scholarship IDs: []

      at log (hooks/use-scholarship-permissions.ts:162:17)

    console.log
      filterScholarshipsByPermission: No permissions assigned, returning empty array

      at log (hooks/use-scholarship-permissions.ts:169:19)

    console.log
      ScholarshipTimeline: Filtered scholarships based on permissions: []

      at log (components/scholarship-timeline.tsx:196:17)

    console.log
      useScholarshipPermissions: API response: { success: true, message: 'Request completed successfully', data: [] }

      at log (hooks/use-scholarship-permissions.ts:59:15)

    console.log
      useScholarshipPermissions: Setting allowed scholarships: []

      at log (hooks/use-scholarship-permissions.ts:62:17)

    console.log
      ScholarshipTimeline: Starting fetch for user: admin 1

      at log (components/scholarship-timeline.tsx:136:15)

    console.log
      ScholarshipTimeline: Fetching scholarships for admin/college user { academicYear: undefined, semester: undefined }

      at log (components/scholarship-timeline.tsx:165:17)

    console.log
      ScholarshipTimeline: Raw scholarships data: []

      at log (components/scholarship-timeline.tsx:187:17)

    console.log
      filterScholarshipsByPermission: Called with scholarships: 0

      at log (hooks/use-scholarship-permissions.ts:138:15)

    console.log
      filterScholarshipsByPermission: User role: admin

      at log (hooks/use-scholarship-permissions.ts:142:15)

    console.log
      filterScholarshipsByPermission: Allowed scholarship IDs: []

      at log (hooks/use-scholarship-permissions.ts:162:17)

    console.log
      filterScholarshipsByPermission: No permissions assigned, returning empty array

      at log (hooks/use-scholarship-permissions.ts:169:19)

    console.log
      ScholarshipTimeline: Filtered scholarships based on permissions: []

      at log (components/scholarship-timeline.tsx:196:17)

    console.log
      useScholarshipPermissions: fetchPermissions called for user: admin 1

      at log (hooks/use-scholarship-permissions.ts:27:13)

    console.log
      useScholarshipPermissions: Fetching allowed scholarships from API...

      at log (hooks/use-scholarship-permissions.ts:55:15)

    console.log
      ScholarshipTimeline: Starting fetch for user: student 1

      at log (components/scholarship-timeline.tsx:136:15)

    console.log
      ScholarshipTimeline: User role not eligible for timeline: student

      at log (components/scholarship-timeline.tsx:177:17)

    console.log
      useScholarshipPermissions: API response: { success: true, message: 'Request completed successfully', data: [] }

      at log (hooks/use-scholarship-permissions.ts:59:15)

    console.log
      useScholarshipPermissions: Setting allowed scholarships: []

      at log (hooks/use-scholarship-permissions.ts:62:17)

    console.log
      useScholarshipPermissions: fetchPermissions called for user: admin 1

      at log (hooks/use-scholarship-permissions.ts:27:13)

    console.log
      useScholarshipPermissions: Fetching allowed scholarships from API...

      at log (hooks/use-scholarship-permissions.ts:55:15)

    console.log
      ScholarshipTimeline: Starting fetch for user: admin 1

      at log (components/scholarship-timeline.tsx:136:15)

    console.log
      ScholarshipTimeline: Fetching scholarships for admin/college user { academicYear: undefined, semester: undefined }

      at log (components/scholarship-timeline.tsx:165:17)

    console.log
      ScholarshipTimeline: Raw scholarships data: []

      at log (components/scholarship-timeline.tsx:187:17)

    console.log
      filterScholarshipsByPermission: Called with scholarships: 0

      at log (hooks/use-scholarship-permissions.ts:138:15)

    console.log
      filterScholarshipsByPermission: User role: admin

      at log (hooks/use-scholarship-permissions.ts:142:15)

    console.log
      filterScholarshipsByPermission: Allowed scholarship IDs: []

      at log (hooks/use-scholarship-permissions.ts:162:17)

    console.log
      filterScholarshipsByPermission: No permissions assigned, returning empty array

      at log (hooks/use-scholarship-permissions.ts:169:19)

    console.log
      ScholarshipTimeline: Filtered scholarships based on permissions: []

      at log (components/scholarship-timeline.tsx:196:17)

    console.log
      useScholarshipPermissions: API response: { success: true, message: 'Request completed successfully', data: [] }

      at log (hooks/use-scholarship-permissions.ts:59:15)

    console.log
      useScholarshipPermissions: Setting allowed scholarships: []

      at log (hooks/use-scholarship-permissions.ts:62:17)

PASS components/__tests__/application-form-data-display.test.tsx
  ‚óè Console

    console.log
      ApplicationFormDataDisplay received formData: {
        submitted_form_data: { fields: { name: [Object], email: [Object], student_id: [Object] } }
      }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: {
        submitted_form_data: { fields: { name: [Object], email: [Object], student_id: [Object] } }
      }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: {
        submitted_form_data: { fields: { name: [Object], email: [Object] } }
      }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: {
        submitted_form_data: { fields: { name: [Object], email: [Object] } }
      }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: {
        form_data: { name: 'ÊùéÂõõ', email: 'li@nycu.edu.tw', department: 'CSIE' }
      }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: {
        form_data: { name: 'ÊùéÂõõ', email: 'li@nycu.edu.tw', department: 'CSIE' }
      }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: { name: 'Áéã‰∫î', email: 'wang@nycu.edu.tw', student_id: '87654321' }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: { name: 'Áéã‰∫î', email: 'wang@nycu.edu.tw', student_id: '87654321' }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: {
        submitted_form_data: {
          fields: {
            name: [Object],
            email: [Object],
            files: [Object],
            agree_terms: [Object]
          }
        }
      }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: {
        submitted_form_data: {
          fields: {
            name: [Object],
            email: [Object],
            files: [Object],
            agree_terms: [Object]
          }
        }
      }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: { unknown_field: 'test value' }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: { unknown_field: 'test value' }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: { special_field: 'special value' }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: { special_field: 'special value' }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: { submitted_form_data: { fields: { hobbies: [Object] } } }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: { submitted_form_data: { fields: { hobbies: [Object] } } }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: { name: 'Test User' }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: { name: 'Test User' }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: { submitted_form_data: { fields: null } }

      at log (components/application-form-data-display.tsx:46:11)

    console.log
      ApplicationFormDataDisplay received formData: { submitted_form_data: { fields: null } }

      at log (components/application-form-data-display.tsx:46:11)

FAIL lib/api/__tests__/modular-api.test.ts
  ‚óè Console

    console.log
      üåê Typed API Client (Browser mode - Nginx proxy)

      at new log (lib/api/typed-client.ts:32:13)

    console.log
      üåê API Client Browser mode - using relative path (Nginx proxy)

      at new log (lib/api/client.ts:41:15)

    console.error
      Authentication failed - clearing token

      110 |       return;
      111 |     }
    > 112 |     originalError.call(console, ...args);
          |                   ^
      113 |   };
      114 | });
      115 |

      at console.call [as error] (jest.setup.ts:112:19)
      at ExtendedApiClient.error [as request] (lib/api/client.ts:181:19)
      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:197:7)

    console.log
      üîç Requesting professor applications with status filter: pending

      at Object.log [as getApplications] (lib/api/modules/professor.ts:27:17)

    console.log
      üì® Professor applications raw response: {
        data: [],
        response: {
          ok: true,
          status: 200,
          statusText: 'OK',
          headers: {
            get: [Function: get],
            has: [Function: has],
            forEach: [Function: forEach]
          },
          json: [AsyncFunction: json],
          text: [AsyncFunction: text]
        }
      }

      at Object.log [as getApplications] (lib/api/modules/professor.ts:39:17)

    console.warn
      ‚ö†Ô∏è Unexpected response format: { success: true, message: 'Request completed successfully', data: [] }

      57 |         }
      58 |
    > 59 |         console.warn("‚ö†Ô∏è Unexpected response format:", apiResponse);
         |                 ^
      60 |         return {
      61 |           success: false,
      62 |           message:

      at Object.warn [as getApplications] (lib/api/modules/professor.ts:59:17)
      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:610:22)

  ‚óè Modular API Structure ‚Ä∫ Auth Module - Login Functionality ‚Ä∫ should call login and set token on success

    expect(received).toEqual(expected) // deep equality

    - Expected  - 15
    + Received  +  2

      Object {
    -   "data": Object {
    -     "access_token": "test-token-123",
    -     "expires_in": 3600,
    -     "token_type": "Bearer",
    -     "user": Object {
    -       "created_at": "2025-01-01",
    -       "email": "test@example.com",
    -       "id": "1",
    -       "name": "Test User",
    -       "nycu_id": "testuser",
    -       "role": "student",
    -       "updated_at": "2025-01-01",
    -     },
    -   },
    -   "message": "Login successful",
    +   "data": Array [],
    +   "message": "Request completed successfully",
        "success": true,
      }

      108 |       const result = await api.auth.login('testuser', 'password123');
      109 |
    > 110 |       expect(result).toEqual(mockResponse);
          |                      ^
      111 |       expect(mockFetch).toHaveBeenCalledWith(
      112 |         '/api/v1/auth/login',
      113 |         expect.objectContaining({

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:110:22)

  ‚óè Modular API Structure ‚Ä∫ Auth Module - Login Functionality ‚Ä∫ should handle login failure

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": [], "message": "Request completed successfully", "success": true}

      128 |       });
      129 |
    > 130 |       await expect(api.auth.login('wrong', 'credentials')).rejects.toThrow('Invalid credentials');
          |             ^
      131 |     });
      132 |   });
      133 |

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (lib/api/__tests__/modular-api.test.ts:130:13)

  ‚óè Modular API Structure ‚Ä∫ Auth Module - Logout Functionality ‚Ä∫ should clear token on logout

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      142 |
      143 |       expect(result.success).toBe(true);
    > 144 |       expect(apiClient.hasToken()).toBe(false);
          |                                    ^
      145 |       expect(mockLocalStorage.removeItem).toHaveBeenCalledWith('auth_token');
      146 |     });
      147 |   });

      at Object.toBe (lib/api/__tests__/modular-api.test.ts:144:36)

  ‚óè Modular API Structure ‚Ä∫ Request Method ‚Ä∫ should make authenticated requests

    expect(received).toEqual(expected) // deep equality

    - Expected  -  3
    + Received  + 13

      Object {
        "data": Object {
    -     "id": 1,
    -     "name": "Test",
    +     "access_token": "test-token-123",
    +     "expires_in": 3600,
    +     "token_type": "Bearer",
    +     "user": Object {
    +       "created_at": "2025-01-01",
    +       "email": "test@example.com",
    +       "id": "1",
    +       "name": "Test User",
    +       "nycu_id": "testuser",
    +       "role": "student",
    +       "updated_at": "2025-01-01",
          },
    -   "message": "Success",
    +   },
    +   "message": "Login successful",
        "success": true,
      }

      182 |       const result = await apiClient.request('/test-endpoint');
      183 |
    > 184 |       expect(result).toEqual(mockResponse);
          |                      ^
      185 |       const fetchCall = mockFetch.mock.calls[0];
      186 |       const headers = fetchCall[1].headers;
      187 |       expect(headers.get('Authorization')).toBe('Bearer auth-token-123');

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:184:22)

  ‚óè Modular API Structure ‚Ä∫ Request Method ‚Ä∫ should handle query parameters

    Invalid credentials

      194 |           response.statusText ||
      195 |           `HTTP ${response.status}`;
    > 196 |         throw new Error(msg);
          |               ^
      197 |       }
      198 |
      199 |       // Runtime validation if schema provided

      at ExtendedApiClient.request (lib/api/client.ts:196:15)
      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:197:7)

  ‚óè Modular API Structure ‚Ä∫ Users Module ‚Ä∫ should get user profile

    expect(received).toEqual(expected) // deep equality

    Expected: {"created_at": "2025-01-01", "email": "test@example.com", "id": "1", "name": "Test User", "nycu_id": "testuser", "role": "student", "updated_at": "2025-01-01"}
    Received: []

      234 |
      235 |       expect(result.success).toBe(true);
    > 236 |       expect(result.data).toEqual(mockUser);
          |                           ^
      237 |       expect(mockFetch).toHaveBeenCalledWith(
      238 |         '/api/v1/users/me',
      239 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:236:27)

  ‚óè Modular API Structure ‚Ä∫ Users Module ‚Ä∫ should update user profile

    TypeError: Cannot read properties of undefined (reading '0')

      254 |       expect(result.success).toBe(true);
      255 |       const fetchCall = mockFetch.mock.calls[0];
    > 256 |       expect(fetchCall[0]).toBe('/api/v1/users/me');
          |                       ^
      257 |       expect(fetchCall[1].method).toBe('PUT');
      258 |     });
      259 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:256:23)

  ‚óè Modular API Structure ‚Ä∫ Users Module ‚Ä∫ should get all users with pagination

    TypeError: Cannot read properties of undefined (reading '0')

      276 |
      277 |       const fetchCall = mockFetch.mock.calls[0];
    > 278 |       expect(fetchCall[0]).toBe('/api/v1/users?page=1&size=10');
          |                       ^
      279 |     });
      280 |   });
      281 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:278:23)

  ‚óè Modular API Structure ‚Ä∫ Scholarships Module ‚Ä∫ should get eligible scholarships

    expect(received).toEqual(expected) // deep equality

    - Expected  - 6
    + Received  + 1

    - Array [
    -   Object {
    -     "id": 1,
    -     "name": "Test Scholarship",
    -   },
    - ]
    + Array []

      304 |
      305 |       expect(result.success).toBe(true);
    > 306 |       expect(result.data).toEqual(mockScholarships);
          |                           ^
      307 |       expect(mockFetch).toHaveBeenCalledWith(
      308 |         '/api/v1/scholarships/eligible',
      309 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:306:27)

  ‚óè Modular API Structure ‚Ä∫ Scholarships Module ‚Ä∫ should get scholarship by ID

    expect(received).toEqual(expected) // deep equality

    Expected: {"id": 1, "name": "Test Scholarship"}
    Received: []

      323 |
      324 |       expect(result.success).toBe(true);
    > 325 |       expect(result.data).toEqual(mockScholarship);
          |                           ^
      326 |       expect(mockFetch).toHaveBeenCalledWith(
      327 |         '/api/v1/scholarships/1',
      328 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:325:27)

  ‚óè Modular API Structure ‚Ä∫ Scholarships Module ‚Ä∫ should get all scholarships

    expect(received).toEqual(expected) // deep equality

    - Expected  - 10
    + Received  +  1

    - Array [
    -   Object {
    -     "id": 1,
    -     "name": "Scholarship 1",
    -   },
    -   Object {
    -     "id": 2,
    -     "name": "Scholarship 2",
    -   },
    - ]
    + Array []

      345 |
      346 |       expect(result.success).toBe(true);
    > 347 |       expect(result.data).toEqual(mockScholarships);
          |                           ^
      348 |       expect(mockFetch).toHaveBeenCalledWith(
      349 |         '/api/v1/scholarships',
      350 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:347:27)

  ‚óè Modular API Structure ‚Ä∫ Scholarships Module ‚Ä∫ should create combined PhD scholarship

    TypeError: Cannot read properties of undefined (reading '0')

      381 |       expect(result.success).toBe(true);
      382 |       const fetchCall = mockFetch.mock.calls[0];
    > 383 |       expect(fetchCall[0]).toBe('/api/v1/scholarships/combined/phd');
          |                       ^
      384 |       expect(fetchCall[1].method).toBe('POST');
      385 |     });
      386 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:383:23)

  ‚óè Modular API Structure ‚Ä∫ Applications Module ‚Ä∫ should get my applications

    expect(received).toEqual(expected) // deep equality

    - Expected  - 7
    + Received  + 1

    - Array [
    -   Object {
    -     "id": 1,
    -     "scholarship_type": "academic_excellence",
    -     "status": "submitted",
    -   },
    - ]
    + Array []

      410 |
      411 |       expect(result.success).toBe(true);
    > 412 |       expect(result.data).toEqual(mockApplications);
          |                           ^
      413 |       expect(mockFetch).toHaveBeenCalledWith(
      414 |         '/api/v1/applications',
      415 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:412:27)

  ‚óè Modular API Structure ‚Ä∫ Applications Module ‚Ä∫ should create application

    TypeError: Cannot read properties of undefined (reading '0')

      433 |       expect(result.success).toBe(true);
      434 |       const fetchCall = mockFetch.mock.calls[0];
    > 435 |       expect(fetchCall[0]).toBe('/api/v1/applications');
          |                       ^
      436 |       expect(fetchCall[1].method).toBe('POST');
      437 |     });
      438 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:435:23)

  ‚óè Modular API Structure ‚Ä∫ Applications Module ‚Ä∫ should submit application

    TypeError: Cannot read properties of undefined (reading '0')

      448 |       expect(result.success).toBe(true);
      449 |       const fetchCall = mockFetch.mock.calls[0];
    > 450 |       expect(fetchCall[0]).toBe('/api/v1/applications/1/submit');
          |                       ^
      451 |       expect(fetchCall[1].method).toBe('POST');
      452 |     });
      453 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:450:23)

  ‚óè Modular API Structure ‚Ä∫ Notifications Module ‚Ä∫ should get notifications

    expect(received).toEqual(expected) // deep equality

    - Expected  - 8
    + Received  + 1

    - Array [
    -   Object {
    -     "id": 1,
    -     "is_read": false,
    -     "message": "Test notification",
    -     "title": "Test",
    -   },
    - ]
    + Array []

      477 |
      478 |       expect(result.success).toBe(true);
    > 479 |       expect(result.data).toEqual(mockNotifications);
          |                           ^
      480 |       expect(mockFetch).toHaveBeenCalledWith(
      481 |         '/api/v1/notifications',
      482 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:479:27)

  ‚óè Modular API Structure ‚Ä∫ Notifications Module ‚Ä∫ should get unread count

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: []

      494 |
      495 |       expect(result.success).toBe(true);
    > 496 |       expect(result.data).toBe(5);
          |                           ^
      497 |       expect(mockFetch).toHaveBeenCalledWith(
      498 |         '/api/v1/notifications/unread-count',
      499 |         expect.any(Object)

      at Object.toBe (lib/api/__tests__/modular-api.test.ts:496:27)

  ‚óè Modular API Structure ‚Ä∫ Notifications Module ‚Ä∫ should mark notification as read

    TypeError: Cannot read properties of undefined (reading '0')

      512 |       expect(result.success).toBe(true);
      513 |       const fetchCall = mockFetch.mock.calls[0];
    > 514 |       expect(fetchCall[0]).toBe('/api/v1/notifications/1/read');
          |                       ^
      515 |       expect(fetchCall[1].method).toBe('PATCH');
      516 |     });
      517 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:514:23)

  ‚óè Modular API Structure ‚Ä∫ Quota Module ‚Ä∫ should get available semesters

    expect(received).toEqual(expected) // deep equality

    - Expected  - 7
    + Received  + 1

    - Array [
    -   Object {
    -     "display_name": "2024 Á¨¨‰∏ÄÂ≠∏Êúü",
    -     "period": "2024-1",
    -     "quota_management_mode": "matrix_based",
    -   },
    - ]
    + Array []

      541 |
      542 |       expect(result.success).toBe(true);
    > 543 |       expect(result.data).toEqual(mockSemesters);
          |                           ^
      544 |       expect(mockFetch).toHaveBeenCalledWith(
      545 |         '/api/v1/scholarship-configurations/available-semesters',
      546 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:543:27)

  ‚óè Modular API Structure ‚Ä∫ Quota Module ‚Ä∫ should get quota overview

    expect(received).toEqual(expected) // deep equality

    - Expected  - 8
    + Received  + 1

    - Array [
    -   Object {
    -     "remaining_quota": 50,
    -     "scholarship_type": "phd",
    -     "total_quota": 100,
    -     "used_quota": 50,
    -   },
    - ]
    + Array []

      562 |
      563 |       expect(result.success).toBe(true);
    > 564 |       expect(result.data).toEqual(mockOverview);
          |                           ^
      565 |       expect(mockFetch).toHaveBeenCalledWith(
      566 |         '/api/v1/scholarship-configurations/overview/2024-1',
      567 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:564:27)

  ‚óè Modular API Structure ‚Ä∫ Quota Module ‚Ä∫ should update matrix quota

    TypeError: Cannot read properties of undefined (reading '0')

      587 |       expect(result.success).toBe(true);
      588 |       const fetchCall = mockFetch.mock.calls[0];
    > 589 |       expect(fetchCall[0]).toBe('/api/v1/scholarship-configurations/matrix-quota');
          |                       ^
      590 |       expect(fetchCall[1].method).toBe('PUT');
      591 |     });
      592 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:589:23)

  ‚óè Modular API Structure ‚Ä∫ Professor Module ‚Ä∫ should get applications for review

    TypeError: Cannot read properties of undefined (reading '0')

      612 |       expect(result.data).toEqual([]);
      613 |       const fetchCall = mockFetch.mock.calls[0];
    > 614 |       expect(fetchCall[0]).toBe('/api/v1/professor/applications?status_filter=pending');
          |                       ^
      615 |     });
      616 |
      617 |     it('should get professor stats', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:614:23)

  ‚óè Modular API Structure ‚Ä∫ Professor Module ‚Ä∫ should get professor stats

    TypeError: Cannot read properties of undefined (reading '0')

      630 |       expect(result.success).toBe(true);
      631 |       const fetchCall = mockFetch.mock.calls[0];
    > 632 |       expect(fetchCall[0]).toBe('/api/v1/professor/stats');
          |                       ^
      633 |     });
      634 |
      635 |     it('should submit professor review', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:632:23)

  ‚óè Modular API Structure ‚Ä∫ Professor Module ‚Ä∫ should submit professor review

    TypeError: Cannot read properties of undefined (reading '0')

      648 |       expect(result.success).toBe(true);
      649 |       const fetchCall = mockFetch.mock.calls[0];
    > 650 |       expect(fetchCall[0]).toBe('/api/v1/professor/applications/1/review');
          |                       ^
      651 |       expect(fetchCall[1].method).toBe('POST');
      652 |     });
      653 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:650:23)

  ‚óè Modular API Structure ‚Ä∫ College Module ‚Ä∫ should get applications for college review

    TypeError: Cannot read properties of undefined (reading '0')

      669 |       expect(result.success).toBe(true);
      670 |       const fetchCall = mockFetch.mock.calls[0];
    > 671 |       expect(fetchCall[0]).toBe('/api/v1/college/applications?status=pending');
          |                       ^
      672 |     });
      673 |
      674 |     it('should get college rankings', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:671:23)

  ‚óè Modular API Structure ‚Ä∫ College Module ‚Ä∫ should get college rankings

    TypeError: Cannot read properties of undefined (reading '0')

      683 |       expect(result.success).toBe(true);
      684 |       const fetchCall = mockFetch.mock.calls[0];
    > 685 |       expect(fetchCall[0]).toBe('/api/v1/college/rankings?academic_year=113&semester=first');
          |                       ^
      686 |     });
      687 |
      688 |     it('should create college ranking', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:685:23)

  ‚óè Modular API Structure ‚Ä∫ College Module ‚Ä∫ should create college ranking

    TypeError: Cannot read properties of undefined (reading '0')

      703 |       expect(result.success).toBe(true);
      704 |       const fetchCall = mockFetch.mock.calls[0];
    > 705 |       expect(fetchCall[0]).toBe('/api/v1/college/rankings');
          |                       ^
      706 |       expect(fetchCall[1].method).toBe('POST');
      707 |     });
      708 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:705:23)

  ‚óè Modular API Structure ‚Ä∫ College Module ‚Ä∫ should get college statistics

    TypeError: Cannot read properties of undefined (reading '0')

      718 |       expect(result.success).toBe(true);
      719 |       const fetchCall = mockFetch.mock.calls[0];
    > 720 |       expect(fetchCall[0]).toBe('/api/v1/college/statistics?academic_year=113&semester=first');
          |                       ^
      721 |     });
      722 |   });
      723 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:720:23)

  ‚óè Modular API Structure ‚Ä∫ Whitelist Module ‚Ä∫ should toggle scholarship whitelist

    TypeError: Cannot read properties of undefined (reading '0')

      738 |       expect(result.success).toBe(true);
      739 |       const fetchCall = mockFetch.mock.calls[0];
    > 740 |       expect(fetchCall[0]).toBe('/api/v1/scholarships/1/whitelist');
          |                       ^
      741 |       expect(fetchCall[1].method).toBe('PATCH');
      742 |     });
      743 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:740:23)

  ‚óè Modular API Structure ‚Ä∫ Whitelist Module ‚Ä∫ should get configuration whitelist

    TypeError: Cannot read properties of undefined (reading '0')

      753 |       expect(result.success).toBe(true);
      754 |       const fetchCall = mockFetch.mock.calls[0];
    > 755 |       expect(fetchCall[0]).toBe('/api/v1/scholarship-configurations/1/whitelist?page=1&size=10');
          |                       ^
      756 |     });
      757 |
      758 |     it('should batch add to whitelist', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:755:23)

  ‚óè Modular API Structure ‚Ä∫ Whitelist Module ‚Ä∫ should batch add to whitelist

    TypeError: Cannot read properties of undefined (reading '0')

      773 |       expect(result.success).toBe(true);
      774 |       const fetchCall = mockFetch.mock.calls[0];
    > 775 |       expect(fetchCall[0]).toBe('/api/v1/scholarship-configurations/1/whitelist/batch');
          |                       ^
      776 |       expect(fetchCall[1].method).toBe('POST');
      777 |     });
      778 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:775:23)

  ‚óè Modular API Structure ‚Ä∫ System Settings Module ‚Ä∫ should get all configurations

    TypeError: Cannot read properties of undefined (reading '0')

      794 |       expect(result.success).toBe(true);
      795 |       const fetchCall = mockFetch.mock.calls[0];
    > 796 |       expect(fetchCall[0]).toBe('/api/v1/system-settings?category=email&include_sensitive=true');
          |                       ^
      797 |     });
      798 |
      799 |     it('should validate configuration', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:796:23)

  ‚óè Modular API Structure ‚Ä∫ System Settings Module ‚Ä∫ should validate configuration

    TypeError: Cannot read properties of undefined (reading '0')

      816 |       expect(result.success).toBe(true);
      817 |       const fetchCall = mockFetch.mock.calls[0];
    > 818 |       expect(fetchCall[0]).toBe('/api/v1/system-settings/validate');
          |                       ^
      819 |       expect(fetchCall[1].method).toBe('POST');
      820 |     });
      821 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:818:23)

  ‚óè Modular API Structure ‚Ä∫ Bank Verification Module ‚Ä∫ should verify single bank account

    TypeError: Cannot read properties of undefined (reading '0')

      841 |       expect(result.success).toBe(true);
      842 |       const fetchCall = mockFetch.mock.calls[0];
    > 843 |       expect(fetchCall[0]).toBe('/api/v1/admin/bank-verification');
          |                       ^
      844 |       expect(fetchCall[1].method).toBe('POST');
      845 |     });
      846 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:843:23)

  ‚óè Modular API Structure ‚Ä∫ Bank Verification Module ‚Ä∫ should verify batch bank accounts

    TypeError: Cannot read properties of undefined (reading '0')

      860 |       expect(result.success).toBe(true);
      861 |       const fetchCall = mockFetch.mock.calls[0];
    > 862 |       expect(fetchCall[0]).toBe('/api/v1/admin/bank-verification/batch');
          |                       ^
      863 |       expect(fetchCall[1].method).toBe('POST');
      864 |     });
      865 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:862:23)

  ‚óè Modular API Structure ‚Ä∫ Professor-Student Module ‚Ä∫ should get professor-student relationships

    TypeError: Cannot read properties of undefined (reading '0')

      884 |       expect(result.success).toBe(true);
      885 |       const fetchCall = mockFetch.mock.calls[0];
    > 886 |       expect(fetchCall[0]).toBe('/api/v1/professor-student?professor_id=1&status=active');
          |                       ^
      887 |     });
      888 |
      889 |     it('should create professor-student relationship', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:886:23)

  ‚óè Modular API Structure ‚Ä∫ Professor-Student Module ‚Ä∫ should create professor-student relationship

    TypeError: Cannot read properties of undefined (reading '0')

      902 |       expect(result.success).toBe(true);
      903 |       const fetchCall = mockFetch.mock.calls[0];
    > 904 |       expect(fetchCall[0]).toBe('/api/v1/professor-student');
          |                       ^
      905 |       expect(fetchCall[1].method).toBe('POST');
      906 |     });
      907 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:904:23)

  ‚óè Modular API Structure ‚Ä∫ Email Automation Module ‚Ä∫ should get automation rules

    TypeError: Cannot read properties of undefined (reading '0')

      923 |       expect(result.success).toBe(true);
      924 |       const fetchCall = mockFetch.mock.calls[0];
    > 925 |       expect(fetchCall[0]).toBe('/api/v1/email-automation?is_active=true');
          |                       ^
      926 |     });
      927 |
      928 |     it('should toggle automation rule', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:925:23)

  ‚óè Modular API Structure ‚Ä∫ Email Automation Module ‚Ä∫ should toggle automation rule

    TypeError: Cannot read properties of undefined (reading '0')

      937 |       expect(result.success).toBe(true);
      938 |       const fetchCall = mockFetch.mock.calls[0];
    > 939 |       expect(fetchCall[0]).toBe('/api/v1/email-automation/1/toggle');
          |                       ^
      940 |       expect(fetchCall[1].method).toBe('PATCH');
      941 |     });
      942 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:939:23)

  ‚óè Modular API Structure ‚Ä∫ Batch Import Module ‚Ä∫ should get batch import history

    TypeError: Cannot read properties of undefined (reading '0')

      962 |       expect(result.success).toBe(true);
      963 |       const fetchCall = mockFetch.mock.calls[0];
    > 964 |       expect(fetchCall[0]).toBe('/api/v1/college/batch-import/history?limit=10');
          |                       ^
      965 |     });
      966 |
      967 |     it('should confirm batch import', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:964:23)

  ‚óè Modular API Structure ‚Ä∫ Batch Import Module ‚Ä∫ should confirm batch import

    TypeError: Cannot read properties of undefined (reading '0')

      980 |       expect(result.success).toBe(true);
      981 |       const fetchCall = mockFetch.mock.calls[0];
    > 982 |       expect(fetchCall[0]).toBe('/api/v1/college/batch-import/batch-123/confirm');
          |                       ^
      983 |       expect(fetchCall[1].method).toBe('POST');
      984 |     });
      985 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:982:23)

  ‚óè Modular API Structure ‚Ä∫ Reference Data Module ‚Ä∫ should get all academies

    TypeError: Cannot read properties of undefined (reading '0')

      1005 |       expect(result.success).toBe(true);
      1006 |       const fetchCall = mockFetch.mock.calls[0];
    > 1007 |       expect(fetchCall[0]).toBe('/api/v1/reference-data/academies');
           |                       ^
      1008 |     });
      1009 |
      1010 |     it('should get all reference data', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1007:23)

  ‚óè Modular API Structure ‚Ä∫ Reference Data Module ‚Ä∫ should get all reference data

    TypeError: Cannot read properties of undefined (reading '0')

      1031 |       expect(result.success).toBe(true);
      1032 |       const fetchCall = mockFetch.mock.calls[0];
    > 1033 |       expect(fetchCall[0]).toBe('/api/v1/reference-data/all');
           |                       ^
      1034 |     });
      1035 |
      1036 |     it('should get scholarship periods', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1033:23)

  ‚óè Modular API Structure ‚Ä∫ Reference Data Module ‚Ä∫ should get scholarship periods

    TypeError: Cannot read properties of undefined (reading '0')

      1058 |       expect(result.success).toBe(true);
      1059 |       const fetchCall = mockFetch.mock.calls[0];
    > 1060 |       expect(fetchCall[0]).toBe('/api/v1/reference-data/scholarship-periods?scholarship_id=1&application_cycle=semester');
           |                       ^
      1061 |     });
      1062 |   });
      1063 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1060:23)

  ‚óè Modular API Structure ‚Ä∫ Application Fields Module ‚Ä∫ should get form config

    TypeError: Cannot read properties of undefined (reading '0')

      1082 |       expect(result.success).toBe(true);
      1083 |       const fetchCall = mockFetch.mock.calls[0];
    > 1084 |       expect(fetchCall[0]).toBe('/api/v1/application-fields/form-config/test?include_inactive=false');
           |                       ^
      1085 |     });
      1086 |
      1087 |     it('should create field', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1084:23)

  ‚óè Modular API Structure ‚Ä∫ Application Fields Module ‚Ä∫ should create field

    TypeError: Cannot read properties of undefined (reading '0')

      1117 |       expect(result.success).toBe(true);
      1118 |       const fetchCall = mockFetch.mock.calls[0];
    > 1119 |       expect(fetchCall[0]).toBe('/api/v1/application-fields/fields');
           |                       ^
      1120 |       expect(fetchCall[1].method).toBe('POST');
      1121 |     });
      1122 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1119:23)

  ‚óè Modular API Structure ‚Ä∫ Application Fields Module ‚Ä∫ should get documents

    TypeError: Cannot read properties of undefined (reading '0')

      1136 |       expect(result.success).toBe(true);
      1137 |       const fetchCall = mockFetch.mock.calls[0];
    > 1138 |       expect(fetchCall[0]).toBe('/api/v1/application-fields/documents/test');
           |                       ^
      1139 |     });
      1140 |   });
      1141 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1138:23)

  ‚óè Modular API Structure ‚Ä∫ User Profiles Module ‚Ä∫ should get my profile

    TypeError: Cannot read properties of undefined (reading '0')

      1165 |       expect(result.success).toBe(true);
      1166 |       const fetchCall = mockFetch.mock.calls[0];
    > 1167 |       expect(fetchCall[0]).toBe('/api/v1/user-profiles/me');
           |                       ^
      1168 |     });
      1169 |
      1170 |     it('should update bank info', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1167:23)

  ‚óè Modular API Structure ‚Ä∫ User Profiles Module ‚Ä∫ should update bank info

    TypeError: Cannot read properties of undefined (reading '0')

      1187 |       expect(result.success).toBe(true);
      1188 |       const fetchCall = mockFetch.mock.calls[0];
    > 1189 |       expect(fetchCall[0]).toBe('/api/v1/user-profiles/me/bank-info');
           |                       ^
      1190 |       expect(fetchCall[1].method).toBe('PUT');
      1191 |     });
      1192 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1189:23)

  ‚óè Modular API Structure ‚Ä∫ User Profiles Module ‚Ä∫ should get incomplete profiles (admin)

    TypeError: Cannot read properties of undefined (reading '0')

      1206 |       expect(result.success).toBe(true);
      1207 |       const fetchCall = mockFetch.mock.calls[0];
    > 1208 |       expect(fetchCall[0]).toBe('/api/v1/user-profiles/admin/incomplete');
           |                       ^
      1209 |     });
      1210 |   });
      1211 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1208:23)

  ‚óè Modular API Structure ‚Ä∫ Email Management Module ‚Ä∫ should get email history

    TypeError: Cannot read properties of undefined (reading '0')

      1235 |       expect(result.success).toBe(true);
      1236 |       const fetchCall = mockFetch.mock.calls[0];
    > 1237 |       expect(fetchCall[0]).toContain('/api/v1/email-management/history');
           |                       ^
      1238 |     });
      1239 |
      1240 |     it('should approve scheduled email', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1237:23)

  ‚óè Modular API Structure ‚Ä∫ Email Management Module ‚Ä∫ should approve scheduled email

    TypeError: Cannot read properties of undefined (reading '0')

      1253 |       expect(result.success).toBe(true);
      1254 |       const fetchCall = mockFetch.mock.calls[0];
    > 1255 |       expect(fetchCall[0]).toBe('/api/v1/email-management/scheduled/1/approve');
           |                       ^
      1256 |       expect(fetchCall[1].method).toBe('PATCH');
      1257 |     });
      1258 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1255:23)

  ‚óè Modular API Structure ‚Ä∫ Email Management Module ‚Ä∫ should get test mode status

    TypeError: Cannot read properties of undefined (reading '0')

      1276 |       expect(result.success).toBe(true);
      1277 |       const fetchCall = mockFetch.mock.calls[0];
    > 1278 |       expect(fetchCall[0]).toBe('/api/v1/email-management/test-mode/status');
           |                       ^
      1279 |     });
      1280 |
      1281 |     it('should enable test mode', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1278:23)

  ‚óè Modular API Structure ‚Ä∫ Email Management Module ‚Ä∫ should enable test mode

    TypeError: Cannot read properties of undefined (reading '0')

      1303 |       expect(result.success).toBe(true);
      1304 |       const fetchCall = mockFetch.mock.calls[0];
    > 1305 |       expect(fetchCall[0]).toContain('/api/v1/email-management/test-mode/enable');
           |                       ^
      1306 |       expect(fetchCall[0]).toContain('redirect_emails=test%40example.com'); // @ is URL-encoded to %40
      1307 |       expect(fetchCall[0]).toContain('duration_hours=24');
      1308 |       expect(fetchCall[1].method).toBe('POST');

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1305:23)

  ‚óè Modular API Structure ‚Ä∫ Admin Module ‚Ä∫ should get dashboard stats

    TypeError: Cannot read properties of undefined (reading '0')

      1330 |       expect(result.success).toBe(true);
      1331 |       const fetchCall = mockFetch.mock.calls[0];
    > 1332 |       expect(fetchCall[0]).toBe('/api/v1/admin/dashboard/stats');
           |                       ^
      1333 |     });
      1334 |
      1335 |     it('should get all applications', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1332:23)

  ‚óè Modular API Structure ‚Ä∫ Admin Module ‚Ä∫ should get all applications

    TypeError: Cannot read properties of undefined (reading '0')

      1348 |       expect(result.success).toBe(true);
      1349 |       const fetchCall = mockFetch.mock.calls[0];
    > 1350 |       expect(fetchCall[0]).toBe('/api/v1/admin/applications?page=1&size=10&status=pending');
           |                       ^
      1351 |     });
      1352 |
      1353 |     it('should create announcement', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1350:23)

  ‚óè Modular API Structure ‚Ä∫ Admin Module ‚Ä∫ should create announcement

    TypeError: Cannot read properties of undefined (reading '0')

      1366 |       expect(result.success).toBe(true);
      1367 |       const fetchCall = mockFetch.mock.calls[0];
    > 1368 |       expect(fetchCall[0]).toBe('/api/v1/admin/announcements');
           |                       ^
      1369 |       expect(fetchCall[1].method).toBe('POST');
      1370 |     });
      1371 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1368:23)

  ‚óè Modular API Structure ‚Ä∫ Admin Module ‚Ä∫ should get scholarship rules

    TypeError: Cannot read properties of undefined (reading '0')

      1385 |       expect(result.success).toBe(true);
      1386 |       const fetchCall = mockFetch.mock.calls[0];
    > 1387 |       expect(fetchCall[0]).toBe('/api/v1/admin/scholarship-rules?scholarship_type_id=1');
           |                       ^
      1388 |     });
      1389 |
      1390 |     it('should create scholarship configuration', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1387:23)

  ‚óè Modular API Structure ‚Ä∫ Admin Module ‚Ä∫ should create scholarship configuration

    TypeError: Cannot read properties of undefined (reading '0')

      1407 |       expect(result.success).toBe(true);
      1408 |       const fetchCall = mockFetch.mock.calls[0];
    > 1409 |       expect(fetchCall[0]).toBe('/api/v1/scholarship-configurations/configurations');
           |                       ^
      1410 |       expect(fetchCall[1].method).toBe('POST');
      1411 |     });
      1412 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1409:23)

PASS components/__tests__/enhanced-student-portal.test.tsx
  ‚óè Console

    console.log
      üåê Typed API Client (Browser mode - Nginx proxy)

      at new log (lib/api/typed-client.ts:32:13)

    console.log
      üåê API Client Browser mode - using relative path (Nginx proxy)

      at new log (lib/api/client.ts:41:15)

    console.log
      üåê Typed API Client (Browser mode - Nginx proxy)

      at new log (lib/api/typed-client.ts:32:13)

    console.log
      üåê API Client Browser mode - using relative path (Nginx proxy)

      at new log (lib/api/client.ts:41:15)

    console.log
      üåê Typed API Client (Browser mode - Nginx proxy)

      at new log (lib/api/typed-client.ts:32:13)

    console.log
      üåê API Client Browser mode - using relative path (Nginx proxy)

      at new log (lib/api/client.ts:41:15)

    console.log
      EnhancedStudentPortal mounted with user: {
        id: '1',
        username: 'testuser',
        email: 'test@example.com',
        role: 'student',
        full_name: 'Test User',
        name: 'Test User',
        is_active: true,
        created_at: '2025-01-01',
        updated_at: '2025-01-01'
      }

      at log (components/enhanced-student-portal.tsx:208:13)

    console.log
      Current auth token exists: false

      at log (components/enhanced-student-portal.tsx:211:13)

    console.log
      Token preview: No token

      at log (components/enhanced-student-portal.tsx:212:13)

    console.log
      Debug: Raw API response: {
        success: true,
        message: 'Request completed successfully',
        data: [
          {
            id: 1,
            code: 'academic_excellence',
            name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
            name_en: 'Academic Excellence Scholarship',
            category: 'undergraduate',
            academic_year: '113',
            semester: 'first',
            amount: 'NT$ 50,000',
            currency: '',
            description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
            description_en: 'For students with excellent academic performance',
            requirements: [Object],
            eligibility: 'GPA ‚â• 3.5',
            is_active: true,
            eligible_sub_types: [Array],
            passed: [],
            errors: []
          }
        ]
      }

      at log (components/enhanced-student-portal.tsx:246:17)

    console.log
      Debug: API response success: true

      at log (components/enhanced-student-portal.tsx:247:17)

    console.log
      Debug: API response data: [
        {
          id: 1,
          code: 'academic_excellence',
          name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
          name_en: 'Academic Excellence Scholarship',
          category: 'undergraduate',
          academic_year: '113',
          semester: 'first',
          amount: 'NT$ 50,000',
          currency: '',
          description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
          description_en: 'For students with excellent academic performance',
          requirements: { gpa: 3.5, credits: 12 },
          eligibility: 'GPA ‚â• 3.5',
          is_active: true,
          eligible_sub_types: [ [Object] ],
          passed: [],
          errors: []
        }
      ]

      at log (components/enhanced-student-portal.tsx:248:17)

    console.log
      Debug: First scholarship data structure: {
        id: 1,
        code: 'academic_excellence',
        name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
        name_en: 'Academic Excellence Scholarship',
        category: 'undergraduate',
        academic_year: '113',
        semester: 'first',
        amount: 'NT$ 50,000',
        currency: '',
        description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
        description_en: 'For students with excellent academic performance',
        requirements: { gpa: 3.5, credits: 12 },
        eligibility: 'GPA ‚â• 3.5',
        is_active: true,
        eligible_sub_types: [
          {
            id: 1,
            value: 'general',
            label: '‰∏ÄËà¨Áî≥Ë´ã',
            label_en: 'General Application'
          }
        ],
        passed: [],
        errors: []
      }

      at log (components/enhanced-student-portal.tsx:263:19)

    console.log
      Debug: All scholarship configuration_ids: [ { code: 'academic_excellence', configuration_id: undefined } ]

      at log (components/enhanced-student-portal.tsx:267:19)

    console.log
      EnhancedStudentPortal mounted with user: {
        id: '1',
        username: 'testuser',
        email: 'test@example.com',
        role: 'student',
        full_name: 'Test User',
        name: 'Test User',
        is_active: true,
        created_at: '2025-01-01',
        updated_at: '2025-01-01'
      }

      at log (components/enhanced-student-portal.tsx:208:13)

    console.log
      Current auth token exists: false

      at log (components/enhanced-student-portal.tsx:211:13)

    console.log
      Token preview: No token

      at log (components/enhanced-student-portal.tsx:212:13)

    console.log
      Debug: Raw API response: {
        success: true,
        message: 'Request completed successfully',
        data: [
          {
            id: 1,
            code: 'academic_excellence',
            name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
            name_en: 'Academic Excellence Scholarship',
            category: 'undergraduate',
            academic_year: '113',
            semester: 'first',
            amount: 'NT$ 50,000',
            currency: '',
            description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
            description_en: 'For students with excellent academic performance',
            requirements: [Object],
            eligibility: 'GPA ‚â• 3.5',
            is_active: true,
            eligible_sub_types: [Array],
            passed: [],
            errors: []
          }
        ]
      }

      at log (components/enhanced-student-portal.tsx:246:17)

    console.log
      Debug: API response success: true

      at log (components/enhanced-student-portal.tsx:247:17)

    console.log
      Debug: API response data: [
        {
          id: 1,
          code: 'academic_excellence',
          name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
          name_en: 'Academic Excellence Scholarship',
          category: 'undergraduate',
          academic_year: '113',
          semester: 'first',
          amount: 'NT$ 50,000',
          currency: '',
          description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
          description_en: 'For students with excellent academic performance',
          requirements: { gpa: 3.5, credits: 12 },
          eligibility: 'GPA ‚â• 3.5',
          is_active: true,
          eligible_sub_types: [ [Object] ],
          passed: [],
          errors: []
        }
      ]

      at log (components/enhanced-student-portal.tsx:248:17)

    console.log
      Debug: First scholarship data structure: {
        id: 1,
        code: 'academic_excellence',
        name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
        name_en: 'Academic Excellence Scholarship',
        category: 'undergraduate',
        academic_year: '113',
        semester: 'first',
        amount: 'NT$ 50,000',
        currency: '',
        description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
        description_en: 'For students with excellent academic performance',
        requirements: { gpa: 3.5, credits: 12 },
        eligibility: 'GPA ‚â• 3.5',
        is_active: true,
        eligible_sub_types: [
          {
            id: 1,
            value: 'general',
            label: '‰∏ÄËà¨Áî≥Ë´ã',
            label_en: 'General Application'
          }
        ],
        passed: [],
        errors: []
      }

      at log (components/enhanced-student-portal.tsx:263:19)

    console.log
      Debug: All scholarship configuration_ids: [ { code: 'academic_excellence', configuration_id: undefined } ]

      at log (components/enhanced-student-portal.tsx:267:19)

    console.log
      EnhancedStudentPortal mounted with user: {
        id: '1',
        username: 'testuser',
        email: 'test@example.com',
        role: 'student',
        full_name: 'Test User',
        name: 'Test User',
        is_active: true,
        created_at: '2025-01-01',
        updated_at: '2025-01-01'
      }

      at log (components/enhanced-student-portal.tsx:208:13)

    console.log
      Current auth token exists: false

      at log (components/enhanced-student-portal.tsx:211:13)

    console.log
      Token preview: No token

      at log (components/enhanced-student-portal.tsx:212:13)

    console.log
      Debug: Raw API response: {
        success: true,
        message: 'Request completed successfully',
        data: [
          {
            id: 1,
            code: 'academic_excellence',
            name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
            name_en: 'Academic Excellence Scholarship',
            category: 'undergraduate',
            academic_year: '113',
            semester: 'first',
            amount: 'NT$ 50,000',
            currency: '',
            description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
            description_en: 'For students with excellent academic performance',
            requirements: [Object],
            eligibility: 'GPA ‚â• 3.5',
            is_active: true,
            eligible_sub_types: [Array],
            passed: [],
            errors: []
          }
        ]
      }

      at log (components/enhanced-student-portal.tsx:246:17)

    console.log
      Debug: API response success: true

      at log (components/enhanced-student-portal.tsx:247:17)

    console.log
      Debug: API response data: [
        {
          id: 1,
          code: 'academic_excellence',
          name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
          name_en: 'Academic Excellence Scholarship',
          category: 'undergraduate',
          academic_year: '113',
          semester: 'first',
          amount: 'NT$ 50,000',
          currency: '',
          description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
          description_en: 'For students with excellent academic performance',
          requirements: { gpa: 3.5, credits: 12 },
          eligibility: 'GPA ‚â• 3.5',
          is_active: true,
          eligible_sub_types: [ [Object] ],
          passed: [],
          errors: []
        }
      ]

      at log (components/enhanced-student-portal.tsx:248:17)

    console.log
      Debug: First scholarship data structure: {
        id: 1,
        code: 'academic_excellence',
        name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
        name_en: 'Academic Excellence Scholarship',
        category: 'undergraduate',
        academic_year: '113',
        semester: 'first',
        amount: 'NT$ 50,000',
        currency: '',
        description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
        description_en: 'For students with excellent academic performance',
        requirements: { gpa: 3.5, credits: 12 },
        eligibility: 'GPA ‚â• 3.5',
        is_active: true,
        eligible_sub_types: [
          {
            id: 1,
            value: 'general',
            label: '‰∏ÄËà¨Áî≥Ë´ã',
            label_en: 'General Application'
          }
        ],
        passed: [],
        errors: []
      }

      at log (components/enhanced-student-portal.tsx:263:19)

    console.log
      Debug: All scholarship configuration_ids: [ { code: 'academic_excellence', configuration_id: undefined } ]

      at log (components/enhanced-student-portal.tsx:267:19)

    console.log
      EnhancedStudentPortal mounted with user: {
        id: '1',
        username: 'testuser',
        email: 'test@example.com',
        role: 'student',
        full_name: 'Test User',
        name: 'Test User',
        is_active: true,
        created_at: '2025-01-01',
        updated_at: '2025-01-01'
      }

      at log (components/enhanced-student-portal.tsx:208:13)

    console.log
      Current auth token exists: false

      at log (components/enhanced-student-portal.tsx:211:13)

    console.log
      Token preview: No token

      at log (components/enhanced-student-portal.tsx:212:13)

    console.log
      Debug: Raw API response: {
        success: true,
        message: 'Request completed successfully',
        data: [
          {
            id: 1,
            code: 'academic_excellence',
            name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
            name_en: 'Academic Excellence Scholarship',
            category: 'undergraduate',
            academic_year: '113',
            semester: 'first',
            amount: 'NT$ 50,000',
            currency: '',
            description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
            description_en: 'For students with excellent academic performance',
            requirements: [Object],
            eligibility: 'GPA ‚â• 3.5',
            is_active: true,
            eligible_sub_types: [Array],
            passed: [],
            errors: []
          }
        ]
      }

      at log (components/enhanced-student-portal.tsx:246:17)

    console.log
      Debug: API response success: true

      at log (components/enhanced-student-portal.tsx:247:17)

    console.log
      Debug: API response data: [
        {
          id: 1,
          code: 'academic_excellence',
          name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
          name_en: 'Academic Excellence Scholarship',
          category: 'undergraduate',
          academic_year: '113',
          semester: 'first',
          amount: 'NT$ 50,000',
          currency: '',
          description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
          description_en: 'For students with excellent academic performance',
          requirements: { gpa: 3.5, credits: 12 },
          eligibility: 'GPA ‚â• 3.5',
          is_active: true,
          eligible_sub_types: [ [Object] ],
          passed: [],
          errors: []
        }
      ]

      at log (components/enhanced-student-portal.tsx:248:17)

    console.log
      Debug: First scholarship data structure: {
        id: 1,
        code: 'academic_excellence',
        name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
        name_en: 'Academic Excellence Scholarship',
        category: 'undergraduate',
        academic_year: '113',
        semester: 'first',
        amount: 'NT$ 50,000',
        currency: '',
        description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
        description_en: 'For students with excellent academic performance',
        requirements: { gpa: 3.5, credits: 12 },
        eligibility: 'GPA ‚â• 3.5',
        is_active: true,
        eligible_sub_types: [
          {
            id: 1,
            value: 'general',
            label: '‰∏ÄËà¨Áî≥Ë´ã',
            label_en: 'General Application'
          }
        ],
        passed: [],
        errors: []
      }

      at log (components/enhanced-student-portal.tsx:263:19)

    console.log
      Debug: All scholarship configuration_ids: [ { code: 'academic_excellence', configuration_id: undefined } ]

      at log (components/enhanced-student-portal.tsx:267:19)

    console.log
      EnhancedStudentPortal mounted with user: {
        id: '1',
        username: 'testuser',
        email: 'test@example.com',
        role: 'student',
        full_name: 'Test User',
        name: 'Test User',
        is_active: true,
        created_at: '2025-01-01',
        updated_at: '2025-01-01'
      }

      at log (components/enhanced-student-portal.tsx:208:13)

    console.log
      Current auth token exists: false

      at log (components/enhanced-student-portal.tsx:211:13)

    console.log
      Token preview: No token

      at log (components/enhanced-student-portal.tsx:212:13)

    console.log
      Debug: Raw API response: {
        success: true,
        message: 'Request completed successfully',
        data: [
          {
            id: 1,
            code: 'academic_excellence',
            name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
            name_en: 'Academic Excellence Scholarship',
            category: 'undergraduate',
            academic_year: '113',
            semester: 'first',
            amount: 'NT$ 50,000',
            currency: '',
            description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
            description_en: 'For students with excellent academic performance',
            requirements: [Object],
            eligibility: 'GPA ‚â• 3.5',
            is_active: true,
            eligible_sub_types: [Array],
            passed: [],
            errors: []
          }
        ]
      }

      at log (components/enhanced-student-portal.tsx:246:17)

    console.log
      Debug: API response success: true

      at log (components/enhanced-student-portal.tsx:247:17)

    console.log
      Debug: API response data: [
        {
          id: 1,
          code: 'academic_excellence',
          name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
          name_en: 'Academic Excellence Scholarship',
          category: 'undergraduate',
          academic_year: '113',
          semester: 'first',
          amount: 'NT$ 50,000',
          currency: '',
          description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
          description_en: 'For students with excellent academic performance',
          requirements: { gpa: 3.5, credits: 12 },
          eligibility: 'GPA ‚â• 3.5',
          is_active: true,
          eligible_sub_types: [ [Object] ],
          passed: [],
          errors: []
        }
      ]

      at log (components/enhanced-student-portal.tsx:248:17)

    console.log
      Debug: First scholarship data structure: {
        id: 1,
        code: 'academic_excellence',
        name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
        name_en: 'Academic Excellence Scholarship',
        category: 'undergraduate',
        academic_year: '113',
        semester: 'first',
        amount: 'NT$ 50,000',
        currency: '',
        description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
        description_en: 'For students with excellent academic performance',
        requirements: { gpa: 3.5, credits: 12 },
        eligibility: 'GPA ‚â• 3.5',
        is_active: true,
        eligible_sub_types: [
          {
            id: 1,
            value: 'general',
            label: '‰∏ÄËà¨Áî≥Ë´ã',
            label_en: 'General Application'
          }
        ],
        passed: [],
        errors: []
      }

      at log (components/enhanced-student-portal.tsx:263:19)

    console.log
      Debug: All scholarship configuration_ids: [ { code: 'academic_excellence', configuration_id: undefined } ]

      at log (components/enhanced-student-portal.tsx:267:19)

    console.log
      EnhancedStudentPortal mounted with user: {
        id: '1',
        username: 'testuser',
        email: 'test@example.com',
        role: 'student',
        full_name: 'Test User',
        name: 'Test User',
        is_active: true,
        created_at: '2025-01-01',
        updated_at: '2025-01-01'
      }

      at log (components/enhanced-student-portal.tsx:208:13)

    console.log
      Current auth token exists: false

      at log (components/enhanced-student-portal.tsx:211:13)

    console.log
      Token preview: No token

      at log (components/enhanced-student-portal.tsx:212:13)

    console.log
      Debug: Raw API response: {
        success: true,
        message: 'Request completed successfully',
        data: [
          {
            id: 1,
            code: 'academic_excellence',
            name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
            name_en: 'Academic Excellence Scholarship',
            category: 'undergraduate',
            academic_year: '113',
            semester: 'first',
            amount: 'NT$ 50,000',
            currency: '',
            description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
            description_en: 'For students with excellent academic performance',
            requirements: [Object],
            eligibility: 'GPA ‚â• 3.5',
            is_active: true,
            eligible_sub_types: [Array],
            passed: [],
            errors: []
          }
        ]
      }

      at log (components/enhanced-student-portal.tsx:246:17)

    console.log
      Debug: API response success: true

      at log (components/enhanced-student-portal.tsx:247:17)

    console.log
      Debug: API response data: [
        {
          id: 1,
          code: 'academic_excellence',
          name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
          name_en: 'Academic Excellence Scholarship',
          category: 'undergraduate',
          academic_year: '113',
          semester: 'first',
          amount: 'NT$ 50,000',
          currency: '',
          description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
          description_en: 'For students with excellent academic performance',
          requirements: { gpa: 3.5, credits: 12 },
          eligibility: 'GPA ‚â• 3.5',
          is_active: true,
          eligible_sub_types: [ [Object] ],
          passed: [],
          errors: []
        }
      ]

      at log (components/enhanced-student-portal.tsx:248:17)

    console.log
      Debug: First scholarship data structure: {
        id: 1,
        code: 'academic_excellence',
        name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
        name_en: 'Academic Excellence Scholarship',
        category: 'undergraduate',
        academic_year: '113',
        semester: 'first',
        amount: 'NT$ 50,000',
        currency: '',
        description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
        description_en: 'For students with excellent academic performance',
        requirements: { gpa: 3.5, credits: 12 },
        eligibility: 'GPA ‚â• 3.5',
        is_active: true,
        eligible_sub_types: [
          {
            id: 1,
            value: 'general',
            label: '‰∏ÄËà¨Áî≥Ë´ã',
            label_en: 'General Application'
          }
        ],
        passed: [],
        errors: []
      }

      at log (components/enhanced-student-portal.tsx:263:19)

    console.log
      Debug: All scholarship configuration_ids: [ { code: 'academic_excellence', configuration_id: undefined } ]

      at log (components/enhanced-student-portal.tsx:267:19)

    console.log
      EnhancedStudentPortal mounted with user: {
        id: '1',
        username: 'testuser',
        email: 'test@example.com',
        role: 'student',
        full_name: 'Test User',
        name: 'Test User',
        is_active: true,
        created_at: '2025-01-01',
        updated_at: '2025-01-01'
      }

      at log (components/enhanced-student-portal.tsx:208:13)

    console.log
      Current auth token exists: false

      at log (components/enhanced-student-portal.tsx:211:13)

    console.log
      Token preview: No token

      at log (components/enhanced-student-portal.tsx:212:13)

    console.log
      Debug: Raw API response: {
        success: true,
        message: 'Request completed successfully',
        data: [
          {
            id: 1,
            code: 'academic_excellence',
            name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
            name_en: 'Academic Excellence Scholarship',
            category: 'undergraduate',
            academic_year: '113',
            semester: 'first',
            amount: 'NT$ 50,000',
            currency: '',
            description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
            description_en: 'For students with excellent academic performance',
            requirements: [Object],
            eligibility: 'GPA ‚â• 3.5',
            is_active: true,
            eligible_sub_types: [Array],
            passed: [],
            errors: []
          }
        ]
      }

      at log (components/enhanced-student-portal.tsx:246:17)

    console.log
      Debug: API response success: true

      at log (components/enhanced-student-portal.tsx:247:17)

    console.log
      Debug: API response data: [
        {
          id: 1,
          code: 'academic_excellence',
          name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
          name_en: 'Academic Excellence Scholarship',
          category: 'undergraduate',
          academic_year: '113',
          semester: 'first',
          amount: 'NT$ 50,000',
          currency: '',
          description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
          description_en: 'For students with excellent academic performance',
          requirements: { gpa: 3.5, credits: 12 },
          eligibility: 'GPA ‚â• 3.5',
          is_active: true,
          eligible_sub_types: [ [Object] ],
          passed: [],
          errors: []
        }
      ]

      at log (components/enhanced-student-portal.tsx:248:17)

    console.log
      Debug: First scholarship data structure: {
        id: 1,
        code: 'academic_excellence',
        name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
        name_en: 'Academic Excellence Scholarship',
        category: 'undergraduate',
        academic_year: '113',
        semester: 'first',
        amount: 'NT$ 50,000',
        currency: '',
        description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
        description_en: 'For students with excellent academic performance',
        requirements: { gpa: 3.5, credits: 12 },
        eligibility: 'GPA ‚â• 3.5',
        is_active: true,
        eligible_sub_types: [
          {
            id: 1,
            value: 'general',
            label: '‰∏ÄËà¨Áî≥Ë´ã',
            label_en: 'General Application'
          }
        ],
        passed: [],
        errors: []
      }

      at log (components/enhanced-student-portal.tsx:263:19)

    console.log
      Debug: All scholarship configuration_ids: [ { code: 'academic_excellence', configuration_id: undefined } ]

      at log (components/enhanced-student-portal.tsx:267:19)

    console.log
      EnhancedStudentPortal mounted with user: {
        id: '1',
        username: 'testuser',
        email: 'test@example.com',
        role: 'student',
        full_name: 'Test User',
        name: 'Test User',
        is_active: true,
        created_at: '2025-01-01',
        updated_at: '2025-01-01'
      }

      at log (components/enhanced-student-portal.tsx:208:13)

    console.log
      Current auth token exists: false

      at log (components/enhanced-student-portal.tsx:211:13)

    console.log
      Token preview: No token

      at log (components/enhanced-student-portal.tsx:212:13)

    console.log
      Debug: Raw API response: {
        success: true,
        message: 'Request completed successfully',
        data: [
          {
            id: 1,
            code: 'academic_excellence',
            name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
            name_en: 'Academic Excellence Scholarship',
            category: 'undergraduate',
            academic_year: '113',
            semester: 'first',
            amount: 'NT$ 50,000',
            currency: '',
            description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
            description_en: 'For students with excellent academic performance',
            requirements: [Object],
            eligibility: 'GPA ‚â• 3.5',
            is_active: true,
            eligible_sub_types: [Array],
            passed: [],
            errors: []
          }
        ]
      }

      at log (components/enhanced-student-portal.tsx:246:17)

    console.log
      Debug: API response success: true

      at log (components/enhanced-student-portal.tsx:247:17)

    console.log
      Debug: API response data: [
        {
          id: 1,
          code: 'academic_excellence',
          name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
          name_en: 'Academic Excellence Scholarship',
          category: 'undergraduate',
          academic_year: '113',
          semester: 'first',
          amount: 'NT$ 50,000',
          currency: '',
          description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
          description_en: 'For students with excellent academic performance',
          requirements: { gpa: 3.5, credits: 12 },
          eligibility: 'GPA ‚â• 3.5',
          is_active: true,
          eligible_sub_types: [ [Object] ],
          passed: [],
          errors: []
        }
      ]

      at log (components/enhanced-student-portal.tsx:248:17)

    console.log
      Debug: First scholarship data structure: {
        id: 1,
        code: 'academic_excellence',
        name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
        name_en: 'Academic Excellence Scholarship',
        category: 'undergraduate',
        academic_year: '113',
        semester: 'first',
        amount: 'NT$ 50,000',
        currency: '',
        description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
        description_en: 'For students with excellent academic performance',
        requirements: { gpa: 3.5, credits: 12 },
        eligibility: 'GPA ‚â• 3.5',
        is_active: true,
        eligible_sub_types: [
          {
            id: 1,
            value: 'general',
            label: '‰∏ÄËà¨Áî≥Ë´ã',
            label_en: 'General Application'
          }
        ],
        passed: [],
        errors: []
      }

      at log (components/enhanced-student-portal.tsx:263:19)

    console.log
      Debug: All scholarship configuration_ids: [ { code: 'academic_excellence', configuration_id: undefined } ]

      at log (components/enhanced-student-portal.tsx:267:19)

    console.log
      EnhancedStudentPortal mounted with user: {
        id: '1',
        username: 'testuser',
        email: 'test@example.com',
        role: 'student',
        full_name: 'Test User',
        name: 'Test User',
        is_active: true,
        created_at: '2025-01-01',
        updated_at: '2025-01-01'
      }

      at log (components/enhanced-student-portal.tsx:208:13)

    console.log
      Current auth token exists: false

      at log (components/enhanced-student-portal.tsx:211:13)

    console.log
      Token preview: No token

      at log (components/enhanced-student-portal.tsx:212:13)

    console.log
      Debug: Raw API response: {
        success: true,
        message: 'Request completed successfully',
        data: [
          {
            id: 1,
            code: 'academic_excellence',
            name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
            name_en: 'Academic Excellence Scholarship',
            category: 'undergraduate',
            academic_year: '113',
            semester: 'first',
            amount: 'NT$ 50,000',
            currency: '',
            description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
            description_en: 'For students with excellent academic performance',
            requirements: [Object],
            eligibility: 'GPA ‚â• 3.5',
            is_active: true,
            eligible_sub_types: [Array],
            passed: [],
            errors: []
          }
        ]
      }

      at log (components/enhanced-student-portal.tsx:246:17)

    console.log
      Debug: API response success: true

      at log (components/enhanced-student-portal.tsx:247:17)

    console.log
      Debug: API response data: [
        {
          id: 1,
          code: 'academic_excellence',
          name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
          name_en: 'Academic Excellence Scholarship',
          category: 'undergraduate',
          academic_year: '113',
          semester: 'first',
          amount: 'NT$ 50,000',
          currency: '',
          description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
          description_en: 'For students with excellent academic performance',
          requirements: { gpa: 3.5, credits: 12 },
          eligibility: 'GPA ‚â• 3.5',
          is_active: true,
          eligible_sub_types: [ [Object] ],
          passed: [],
          errors: []
        }
      ]

      at log (components/enhanced-student-portal.tsx:248:17)

    console.log
      Debug: First scholarship data structure: {
        id: 1,
        code: 'academic_excellence',
        name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
        name_en: 'Academic Excellence Scholarship',
        category: 'undergraduate',
        academic_year: '113',
        semester: 'first',
        amount: 'NT$ 50,000',
        currency: '',
        description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
        description_en: 'For students with excellent academic performance',
        requirements: { gpa: 3.5, credits: 12 },
        eligibility: 'GPA ‚â• 3.5',
        is_active: true,
        eligible_sub_types: [
          {
            id: 1,
            value: 'general',
            label: '‰∏ÄËà¨Áî≥Ë´ã',
            label_en: 'General Application'
          }
        ],
        passed: [],
        errors: []
      }

      at log (components/enhanced-student-portal.tsx:263:19)

    console.log
      Debug: All scholarship configuration_ids: [ { code: 'academic_excellence', configuration_id: undefined } ]

      at log (components/enhanced-student-portal.tsx:267:19)

    console.log
      EnhancedStudentPortal mounted with user: {
        id: '1',
        username: 'testuser',
        email: 'test@example.com',
        role: 'student',
        full_name: 'Test User',
        name: 'Test User',
        is_active: true,
        created_at: '2025-01-01',
        updated_at: '2025-01-01'
      }

      at log (components/enhanced-student-portal.tsx:208:13)

    console.log
      Current auth token exists: false

      at log (components/enhanced-student-portal.tsx:211:13)

    console.log
      Token preview: No token

      at log (components/enhanced-student-portal.tsx:212:13)

    console.log
      Debug: Raw API response: {
        success: true,
        message: 'Request completed successfully',
        data: [
          {
            id: 1,
            code: 'academic_excellence',
            name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
            name_en: 'Academic Excellence Scholarship',
            category: 'undergraduate',
            academic_year: '113',
            semester: 'first',
            amount: 'NT$ 50,000',
            currency: '',
            description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
            description_en: 'For students with excellent academic performance',
            requirements: [Object],
            eligibility: 'GPA ‚â• 3.5',
            is_active: true,
            eligible_sub_types: [Array],
            passed: [],
            errors: []
          }
        ]
      }

      at log (components/enhanced-student-portal.tsx:246:17)

    console.log
      Debug: API response success: true

      at log (components/enhanced-student-portal.tsx:247:17)

    console.log
      Debug: API response data: [
        {
          id: 1,
          code: 'academic_excellence',
          name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
          name_en: 'Academic Excellence Scholarship',
          category: 'undergraduate',
          academic_year: '113',
          semester: 'first',
          amount: 'NT$ 50,000',
          currency: '',
          description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
          description_en: 'For students with excellent academic performance',
          requirements: { gpa: 3.5, credits: 12 },
          eligibility: 'GPA ‚â• 3.5',
          is_active: true,
          eligible_sub_types: [ [Object] ],
          passed: [],
          errors: []
        }
      ]

      at log (components/enhanced-student-portal.tsx:248:17)

    console.log
      Debug: First scholarship data structure: {
        id: 1,
        code: 'academic_excellence',
        name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
        name_en: 'Academic Excellence Scholarship',
        category: 'undergraduate',
        academic_year: '113',
        semester: 'first',
        amount: 'NT$ 50,000',
        currency: '',
        description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
        description_en: 'For students with excellent academic performance',
        requirements: { gpa: 3.5, credits: 12 },
        eligibility: 'GPA ‚â• 3.5',
        is_active: true,
        eligible_sub_types: [
          {
            id: 1,
            value: 'general',
            label: '‰∏ÄËà¨Áî≥Ë´ã',
            label_en: 'General Application'
          }
        ],
        passed: [],
        errors: []
      }

      at log (components/enhanced-student-portal.tsx:263:19)

    console.log
      Debug: All scholarship configuration_ids: [ { code: 'academic_excellence', configuration_id: undefined } ]

      at log (components/enhanced-student-portal.tsx:267:19)

    console.log
      EnhancedStudentPortal mounted with user: {
        id: '1',
        username: 'testuser',
        email: 'test@example.com',
        role: 'student',
        full_name: 'Test User',
        name: 'Test User',
        is_active: true,
        created_at: '2025-01-01',
        updated_at: '2025-01-01'
      }

      at log (components/enhanced-student-portal.tsx:208:13)

    console.log
      Current auth token exists: false

      at log (components/enhanced-student-portal.tsx:211:13)

    console.log
      Token preview: No token

      at log (components/enhanced-student-portal.tsx:212:13)

    console.log
      Debug: Raw API response: {
        success: true,
        message: 'Request completed successfully',
        data: [
          {
            id: 1,
            code: 'academic_excellence',
            name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
            name_en: 'Academic Excellence Scholarship',
            category: 'undergraduate',
            academic_year: '113',
            semester: 'first',
            amount: 'NT$ 50,000',
            currency: '',
            description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
            description_en: 'For students with excellent academic performance',
            requirements: [Object],
            eligibility: 'GPA ‚â• 3.5',
            is_active: true,
            eligible_sub_types: [Array],
            passed: [],
            errors: []
          }
        ]
      }

      at log (components/enhanced-student-portal.tsx:246:17)

    console.log
      Debug: API response success: true

      at log (components/enhanced-student-portal.tsx:247:17)

    console.log
      Debug: API response data: [
        {
          id: 1,
          code: 'academic_excellence',
          name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
          name_en: 'Academic Excellence Scholarship',
          category: 'undergraduate',
          academic_year: '113',
          semester: 'first',
          amount: 'NT$ 50,000',
          currency: '',
          description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
          description_en: 'For students with excellent academic performance',
          requirements: { gpa: 3.5, credits: 12 },
          eligibility: 'GPA ‚â• 3.5',
          is_active: true,
          eligible_sub_types: [ [Object] ],
          passed: [],
          errors: []
        }
      ]

      at log (components/enhanced-student-portal.tsx:248:17)

    console.log
      Debug: First scholarship data structure: {
        id: 1,
        code: 'academic_excellence',
        name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
        name_en: 'Academic Excellence Scholarship',
        category: 'undergraduate',
        academic_year: '113',
        semester: 'first',
        amount: 'NT$ 50,000',
        currency: '',
        description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
        description_en: 'For students with excellent academic performance',
        requirements: { gpa: 3.5, credits: 12 },
        eligibility: 'GPA ‚â• 3.5',
        is_active: true,
        eligible_sub_types: [
          {
            id: 1,
            value: 'general',
            label: '‰∏ÄËà¨Áî≥Ë´ã',
            label_en: 'General Application'
          }
        ],
        passed: [],
        errors: []
      }

      at log (components/enhanced-student-portal.tsx:263:19)

    console.log
      Debug: All scholarship configuration_ids: [ { code: 'academic_excellence', configuration_id: undefined } ]

      at log (components/enhanced-student-portal.tsx:267:19)

    console.log
      EnhancedStudentPortal mounted with user: {
        id: '1',
        username: 'testuser',
        email: 'test@example.com',
        role: 'student',
        full_name: 'Test User',
        name: 'Test User',
        is_active: true,
        created_at: '2025-01-01',
        updated_at: '2025-01-01'
      }

      at log (components/enhanced-student-portal.tsx:208:13)

    console.log
      Current auth token exists: false

      at log (components/enhanced-student-portal.tsx:211:13)

    console.log
      Token preview: No token

      at log (components/enhanced-student-portal.tsx:212:13)

    console.log
      Debug: Raw API response: {
        success: true,
        message: 'Request completed successfully',
        data: [
          {
            id: 1,
            code: 'academic_excellence',
            name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
            name_en: 'Academic Excellence Scholarship',
            category: 'undergraduate',
            academic_year: '113',
            semester: 'first',
            amount: 'NT$ 50,000',
            currency: '',
            description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
            description_en: 'For students with excellent academic performance',
            requirements: [Object],
            eligibility: 'GPA ‚â• 3.5',
            is_active: true,
            eligible_sub_types: [Array],
            passed: [],
            errors: []
          }
        ]
      }

      at log (components/enhanced-student-portal.tsx:246:17)

    console.log
      Debug: API response success: true

      at log (components/enhanced-student-portal.tsx:247:17)

    console.log
      Debug: API response data: [
        {
          id: 1,
          code: 'academic_excellence',
          name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
          name_en: 'Academic Excellence Scholarship',
          category: 'undergraduate',
          academic_year: '113',
          semester: 'first',
          amount: 'NT$ 50,000',
          currency: '',
          description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
          description_en: 'For students with excellent academic performance',
          requirements: { gpa: 3.5, credits: 12 },
          eligibility: 'GPA ‚â• 3.5',
          is_active: true,
          eligible_sub_types: [ [Object] ],
          passed: [],
          errors: []
        }
      ]

      at log (components/enhanced-student-portal.tsx:248:17)

    console.log
      Debug: First scholarship data structure: {
        id: 1,
        code: 'academic_excellence',
        name: 'Â≠∏Ë°ìÂÑ™ÁßÄÁçéÂ≠∏Èáë',
        name_en: 'Academic Excellence Scholarship',
        category: 'undergraduate',
        academic_year: '113',
        semester: 'first',
        amount: 'NT$ 50,000',
        currency: '',
        description: 'ÂÑ™ÁßÄÂ≠∏Ë°ìË°®ÁèæÂ≠∏ÁîüÁçéÂ≠∏Èáë',
        description_en: 'For students with excellent academic performance',
        requirements: { gpa: 3.5, credits: 12 },
        eligibility: 'GPA ‚â• 3.5',
        is_active: true,
        eligible_sub_types: [
          {
            id: 1,
            value: 'general',
            label: '‰∏ÄËà¨Áî≥Ë´ã',
            label_en: 'General Application'
          }
        ],
        passed: [],
        errors: []
      }

      at log (components/enhanced-student-portal.tsx:263:19)

    console.log
      Debug: All scholarship configuration_ids: [ { code: 'academic_excellence', configuration_id: undefined } ]

      at log (components/enhanced-student-portal.tsx:267:19)

PASS hooks/__tests__/use-auth.test.tsx
  ‚óè Console

    console.log
      üåê Typed API Client (Browser mode - Nginx proxy)

      at new log (lib/api/typed-client.ts:32:13)

    console.log
      üåê API Client Browser mode - using relative path (Nginx proxy)

      at new log (lib/api/client.ts:41:15)

    console.log
      Checking existing authentication...

      at log (hooks/use-auth.tsx:36:15)

    console.log
      Found token: false Found user data: false

      at log (hooks/use-auth.tsx:42:15)

    console.log
      No existing authentication found

      at log (hooks/use-auth.tsx:64:17)

    console.log
      Checking existing authentication...

      at log (hooks/use-auth.tsx:36:15)

    console.log
      Found token: false Found user data: false

      at log (hooks/use-auth.tsx:42:15)

    console.log
      No existing authentication found

      at log (hooks/use-auth.tsx:64:17)

PASS hooks/__tests__/use-mobile.test.tsx
PASS lib/utils/__tests__/application-helpers.test.ts
  ‚óè Console

    console.log
      üåê Typed API Client (Browser mode - Nginx proxy)

      at new log (lib/api/typed-client.ts:32:13)

    console.log
      üåê API Client Browser mode - using relative path (Nginx proxy)

      at new log (lib/api/client.ts:41:15)

    console.warn
      Failed to fetch scholarship type for code: academic_excellence Error: API Error
          at Object.<anonymous> (/home/jotp/scholarship-system/frontend/lib/utils/__tests__/application-helpers.test.ts:274:53)
          at Promise.then.completed (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jotp/scholarship-system/frontend/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jotp/scholarship-system/frontend/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jotp/scholarship-system/frontend/node_modules/jest-runner/build/testWorker.js:106:12)

      378 |       }
      379 |     } catch (error) {
    > 380 |       console.warn(
          |               ^
      381 |         `Failed to fetch scholarship type for code: ${value}`,
      382 |         error
      383 |       );

      at warn (lib/utils/application-helpers.ts:380:15)
      at Object.<anonymous> (lib/utils/__tests__/application-helpers.test.ts:276:22)

    console.error
      Failed to fetch application files: Error: API Error
          at Object.<anonymous> (/home/jotp/scholarship-system/frontend/lib/utils/__tests__/application-helpers.test.ts:393:9)
          at Promise.then.completed (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/jotp/scholarship-system/frontend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/jotp/scholarship-system/frontend/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/jotp/scholarship-system/frontend/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/jotp/scholarship-system/frontend/node_modules/jest-runner/build/testWorker.js:106:12)

      110 |       return;
      111 |     }
    > 112 |     originalError.call(console, ...args);
          |                   ^
      113 |   };
      114 | });
      115 |

      at console.call [as error] (jest.setup.ts:112:19)
      at error (lib/utils/application-helpers.ts:468:13)
      at Object.<anonymous> (lib/utils/__tests__/application-helpers.test.ts:399:22)

PASS hooks/__tests__/use-scholarship-permissions.test.tsx
  ‚óè Console

    console.log
      üåê Typed API Client (Browser mode - Nginx proxy)

      at new log (lib/api/typed-client.ts:32:13)

    console.log
      üåê API Client Browser mode - using relative path (Nginx proxy)

      at new log (lib/api/client.ts:41:15)

    console.log
      useScholarshipPermissions: fetchPermissions called for user: admin 1

      at log (hooks/use-scholarship-permissions.ts:27:13)

    console.log
      useScholarshipPermissions: Fetching allowed scholarships from API...

      at log (hooks/use-scholarship-permissions.ts:55:15)

    console.log
      useScholarshipPermissions: API response: { success: true, message: 'Request completed successfully', data: [] }

      at log (hooks/use-scholarship-permissions.ts:59:15)

    console.log
      useScholarshipPermissions: Setting allowed scholarships: []

      at log (hooks/use-scholarship-permissions.ts:62:17)

    console.log
      useScholarshipPermissions: fetchPermissions called for user: admin 1

      at log (hooks/use-scholarship-permissions.ts:27:13)

    console.log
      useScholarshipPermissions: Fetching allowed scholarships from API...

      at log (hooks/use-scholarship-permissions.ts:55:15)

    console.log
      useScholarshipPermissions: API response: { success: true, message: 'Request completed successfully', data: [] }

      at log (hooks/use-scholarship-permissions.ts:59:15)

    console.log
      useScholarshipPermissions: Setting allowed scholarships: []

      at log (hooks/use-scholarship-permissions.ts:62:17)

    console.log
      useScholarshipPermissions: fetchPermissions called for user: undefined undefined

      at log (hooks/use-scholarship-permissions.ts:27:13)

    console.log
      useScholarshipPermissions: User not authenticated

      at log (hooks/use-scholarship-permissions.ts:34:15)

    console.log
      useScholarshipPermissions: fetchPermissions called for user: admin 1

      at log (hooks/use-scholarship-permissions.ts:27:13)

    console.log
      useScholarshipPermissions: Fetching allowed scholarships from API...

      at log (hooks/use-scholarship-permissions.ts:55:15)

    console.log
      useScholarshipPermissions: API response: { success: true, message: 'Request completed successfully', data: [] }

      at log (hooks/use-scholarship-permissions.ts:59:15)

    console.log
      useScholarshipPermissions: Setting allowed scholarships: []

      at log (hooks/use-scholarship-permissions.ts:62:17)

    console.log
      useScholarshipPermissions: fetchPermissions called for user: admin 1

      at log (hooks/use-scholarship-permissions.ts:27:13)

    console.log
      useScholarshipPermissions: Fetching allowed scholarships from API...

      at log (hooks/use-scholarship-permissions.ts:55:15)

    console.log
      useScholarshipPermissions: API response: { success: true, message: 'Request completed successfully', data: [] }

      at log (hooks/use-scholarship-permissions.ts:59:15)

    console.log
      useScholarshipPermissions: Setting allowed scholarships: []

      at log (hooks/use-scholarship-permissions.ts:62:17)

PASS hooks/__tests__/use-language-preference.test.tsx
FAIL lib/__tests__/api.test.ts
  ‚óè Console

    console.log
      üåê Typed API Client (Browser mode - Nginx proxy)

      at new log (lib/api/typed-client.ts:32:13)

    console.log
      üåê API Client Browser mode - using relative path (Nginx proxy)

      at new log (lib/api/client.ts:41:15)

  ‚óè API Client ‚Ä∫ Authentication ‚Ä∫ should login successfully with valid credentials

    TypeError: Cannot read properties of undefined (reading '0')

      49 |
      50 |       const fetchCall = mockFetch.mock.calls[0];
    > 51 |       expect(fetchCall[0]).toBe("/api/v1/auth/login");
         |                       ^
      52 |       expect(fetchCall[1].method).toBe("POST");
      53 |       expect(fetchCall[1].body).toBe(
      54 |         JSON.stringify({ username: "testuser", password: "password" })

      at Object.<anonymous> (lib/__tests__/api.test.ts:51:23)

  ‚óè API Client ‚Ä∫ Authentication ‚Ä∫ should handle login failure

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": [], "message": "Request completed successfully", "success": true}

      69 |       });
      70 |
    > 71 |       await expect(
         |             ^
      72 |         apiClient.auth.login("invalid", "credentials")
      73 |       ).rejects.toThrow("Invalid credentials");
      74 |     });

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (lib/__tests__/api.test.ts:71:13)

  ‚óè API Client ‚Ä∫ Authentication ‚Ä∫ should get current user with valid token

    TypeError: Cannot read properties of undefined (reading '1')

      103 |
      104 |       const fetchCall = mockFetch.mock.calls[0];
    > 105 |       const headers = fetchCall[1]?.headers;
          |                                ^
      106 |
      107 |       expect(getHeader(headers, "Authorization")).toBe("Bearer test-token");
      108 |       expect(result.data).toEqual(mockUser);

      at Object.<anonymous> (lib/__tests__/api.test.ts:105:32)

  ‚óè API Client ‚Ä∫ Applications ‚Ä∫ should fetch user applications

    TypeError: Cannot read properties of undefined (reading '0')

      143 |
      144 |       const fetchCall = mockFetch.mock.calls[0];
    > 145 |       expect(fetchCall[0]).toContain("/applications");
          |                       ^
      146 |       expect(getHeader(fetchCall[1]?.headers, "Authorization")).toBe(
      147 |         "Bearer test-token"
      148 |       );

      at Object.<anonymous> (lib/__tests__/api.test.ts:145:23)

  ‚óè API Client ‚Ä∫ Applications ‚Ä∫ should create new application

    TypeError: Cannot read properties of undefined (reading '1')

      182 |
      183 |       const fetchCall = mockFetch.mock.calls[0];
    > 184 |       const headers = fetchCall[1]?.headers;
          |                                ^
      185 |
      186 |       expect(fetchCall[0]).toContain("/applications");
      187 |       expect(fetchCall[1].method).toBe("POST");

      at Object.<anonymous> (lib/__tests__/api.test.ts:184:32)

  ‚óè API Client ‚Ä∫ Applications ‚Ä∫ should submit application

    TypeError: Cannot read properties of undefined (reading '0')

      215 |
      216 |       const fetchCall = mockFetch.mock.calls[0];
    > 217 |       expect(fetchCall[0]).toBe(
          |                       ^
      218 |         `/api/v1/applications/${applicationId}/submit`
      219 |       );
      220 |       expect(fetchCall[1].method).toBe("POST");

      at Object.<anonymous> (lib/__tests__/api.test.ts:217:23)

  ‚óè API Client ‚Ä∫ Error Handling ‚Ä∫ should handle network errors

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": [], "message": "Request completed successfully", "success": true}

      246 |       mockFetch.mockRejectedValueOnce(new Error("Network error"));
      247 |
    > 248 |       await expect(apiClient.auth.getCurrentUser()).rejects.toThrow(
          |             ^
      249 |         "Network error"
      250 |       );
      251 |     });

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (lib/__tests__/api.test.ts:248:13)

  ‚óè API Client ‚Ä∫ Error Handling ‚Ä∫ should handle HTTP errors

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": [], "message": "Request completed successfully", "success": true}

      262 |       });
      263 |
    > 264 |       await expect(apiClient.auth.getCurrentUser()).rejects.toThrow(
          |             ^
      265 |         "Internal server error"
      266 |       );
      267 |     });

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (lib/__tests__/api.test.ts:264:13)

PASS lib/__tests__/validation.test.ts
FAIL lib/__tests__/api-comprehensive.test.ts
  ‚óè Console

    console.log
      üåê Typed API Client (Browser mode - Nginx proxy)

      at new log (lib/api/typed-client.ts:32:13)

    console.log
      üåê API Client Browser mode - using relative path (Nginx proxy)

      at new log (lib/api/client.ts:41:15)

  ‚óè API Client ‚Ä∫ Authentication ‚Ä∫ should include auth token in requests

    TypeError: Cannot read properties of undefined (reading '1')

      38 |
      39 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 40 |       const headers = fetchCall[1]?.headers;
         |                                ^
      41 |
      42 |       expect(fetch).toHaveBeenCalled();
      43 |       expect(headers).toBeDefined();

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:40:32)

  ‚óè API Client ‚Ä∫ Authentication ‚Ä∫ should handle requests without auth token

    TypeError: Cannot read properties of undefined (reading '1')

      59 |
      60 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 61 |       const headers = fetchCall[1]?.headers;
         |                                ^
      62 |
      63 |       let authHeader;
      64 |       if (headers instanceof Headers) {

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:61:32)

  ‚óè API Client ‚Ä∫ Authentication ‚Ä∫ should clear token on 401 response

    expect(received).toBeNull()

    Received: "mock-token"

      86 |       }
      87 |
    > 88 |       expect(apiClient.getToken()).toBeNull();
         |                                    ^
      89 |     });
      90 |   });
      91 |

      at Object.toBeNull (lib/__tests__/api-comprehensive.test.ts:88:36)

  ‚óè API Client ‚Ä∫ Error Handling ‚Ä∫ should handle network errors

    expect(received).toBe(expected) // Object.is equality

    Expected: "Network error"
    Received: "fail is not defined"

       98 |         fail("Should have thrown an error");
       99 |       } catch (error: any) {
    > 100 |         expect(error.message).toBe("Network error");
          |                               ^
      101 |       }
      102 |     });
      103 |

      at Object.toBe (lib/__tests__/api-comprehensive.test.ts:100:31)

  ‚óè API Client ‚Ä∫ Error Handling ‚Ä∫ should handle HTTP error responses

    expect(received).toBe(expected) // Object.is equality

    Expected: "Server error"
    Received: "fail is not defined"

      115 |         fail("Should have thrown an error");
      116 |       } catch (error: any) {
    > 117 |         expect(error.message).toBe("Server error");
          |                               ^
      118 |       }
      119 |     });
      120 |

      at Object.toBe (lib/__tests__/api-comprehensive.test.ts:117:31)

  ‚óè API Client ‚Ä∫ Scholarship APIs ‚Ä∫ should get all scholarships

    expect(received).toEqual(expected) // deep equality

    - Expected  - 12
    + Received  +  1

    - Array [
    -   Object {
    -     "code": "academic_excellence",
    -     "id": 1,
    -     "name": "Academic Excellence",
    -   },
    -   Object {
    -     "code": "research_grant",
    -     "id": 2,
    -     "name": "Research Grant",
    -   },
    - ]
    + Array []

      150 |
      151 |       expect(result.success).toBe(true);
    > 152 |       expect(result.data).toEqual(mockScholarships);
          |                           ^
      153 |       expect(fetch).toHaveBeenCalledWith(
      154 |         expect.stringContaining("/scholarships"),
      155 |         expect.any(Object)

      at Object.toEqual (lib/__tests__/api-comprehensive.test.ts:152:27)

  ‚óè API Client ‚Ä∫ Scholarship APIs ‚Ä∫ should get eligible scholarships

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/scholarships/eligible", Any<Object>

    Number of calls: 0

      160 |       await apiClient.scholarships.getEligible();
      161 |
    > 162 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      163 |         expect.stringContaining("/scholarships/eligible"),
      164 |         expect.any(Object)
      165 |       );

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:162:21)

  ‚óè API Client ‚Ä∫ Scholarship APIs ‚Ä∫ should get scholarship by ID

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/scholarships/1", Any<Object>

    Number of calls: 0

      169 |       await apiClient.scholarships.getById(1);
      170 |
    > 171 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      172 |         expect.stringContaining("/scholarships/1"),
      173 |         expect.any(Object)
      174 |       );

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:171:21)

  ‚óè API Client ‚Ä∫ Application APIs ‚Ä∫ should create application

    TypeError: Cannot read properties of undefined (reading '0')

      187 |
      188 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 189 |       expect(fetchCall[0]).toContain("/applications");
          |                       ^
      190 |       expect(fetchCall[1].method).toBe("POST");
      191 |       expect(fetchCall[1].body).toBe(JSON.stringify(applicationData));
      192 |     });

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:189:23)

  ‚óè API Client ‚Ä∫ Application APIs ‚Ä∫ should get user applications

    TypeError: Cannot read properties of undefined (reading '0')

      196 |
      197 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 198 |       expect(fetchCall[0]).toContain("/applications");
          |                       ^
      199 |     });
      200 |
      201 |     it("should update application", async () => {

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:198:23)

  ‚óè API Client ‚Ä∫ Application APIs ‚Ä∫ should update application

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/applications/1", ObjectContaining {"body": "{\"form_data\":{\"name\":\"Updated Name\"}}", "method": "PUT"}

    Number of calls: 0

      204 |       await apiClient.applications.updateApplication(1, updateData);
      205 |
    > 206 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      207 |         expect.stringContaining("/applications/1"),
      208 |         expect.objectContaining({
      209 |           method: "PUT",

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:206:21)

  ‚óè API Client ‚Ä∫ Application APIs ‚Ä∫ should delete application

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/applications/1", ObjectContaining {"method": "DELETE"}

    Number of calls: 0

      216 |       await apiClient.applications.deleteApplication(1);
      217 |
    > 218 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      219 |         expect.stringContaining("/applications/1"),
      220 |         expect.objectContaining({
      221 |           method: "DELETE",

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:218:21)

  ‚óè API Client ‚Ä∫ Admin APIs ‚Ä∫ should get dashboard stats

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/admin/dashboard/stats", Any<Object>

    Number of calls: 0

      229 |       await apiClient.admin.getDashboardStats();
      230 |
    > 231 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      232 |         expect.stringContaining("/admin/dashboard/stats"),
      233 |         expect.any(Object)
      234 |       );

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:231:21)

  ‚óè API Client ‚Ä∫ Admin APIs ‚Ä∫ should get all applications with filters

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/admin/applications?page=1&size=10&status=submitted", Any<Object>

    Number of calls: 0

      238 |       await apiClient.admin.getAllApplications(1, 10, "submitted");
      239 |
    > 240 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      241 |         expect.stringContaining(
      242 |           "/admin/applications?page=1&size=10&status=submitted"
      243 |         ),

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:240:21)

  ‚óè API Client ‚Ä∫ Admin APIs ‚Ä∫ should update application status

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/admin/applications/1/status", ObjectContaining {"body": "{\"status\":\"approved\",\"review_notes\":\"Looks good\"}", "method": "PATCH"}

    Number of calls: 0

      253 |       );
      254 |
    > 255 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      256 |         expect.stringContaining("/admin/applications/1/status"),
      257 |         expect.objectContaining({
      258 |           method: "PATCH",

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:255:21)

  ‚óè API Client ‚Ä∫ File APIs ‚Ä∫ should upload document

    TypeError: Cannot read properties of undefined (reading '0')

      273 |
      274 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 275 |       expect(fetchCall[0]).toContain("/applications/1/files/upload");
          |                       ^
      276 |       expect(fetchCall[0]).toContain("file_type=transcript");
      277 |       expect(fetchCall[1].method).toBe("POST");
      278 |       expect(fetchCall[1].body).toBeInstanceOf(FormData);

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:275:23)

  ‚óè API Client ‚Ä∫ File APIs ‚Ä∫ should get files by application ID

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/applications/1/files", Any<Object>

    Number of calls: 0

      282 |       await apiClient.applications.getApplicationFiles(1);
      283 |
    > 284 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      285 |         expect.stringContaining("/applications/1/files"),
      286 |         expect.any(Object)
      287 |       );

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:284:21)

  ‚óè API Client ‚Ä∫ Request Configuration ‚Ä∫ should set correct Content-Type for JSON requests

    TypeError: Cannot read properties of undefined (reading '1')

      297 |
      298 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 299 |       const headers = fetchCall[1]?.headers;
          |                                ^
      300 |
      301 |       let contentType;
      302 |       if (headers instanceof Headers) {

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:299:32)

  ‚óè API Client ‚Ä∫ Request Configuration ‚Ä∫ should handle FormData without explicit Content-Type header

    TypeError: Cannot read properties of undefined (reading '1')

      314 |
      315 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 316 |       const headers = fetchCall[1]?.headers;
          |                                ^
      317 |
      318 |       let contentType;
      319 |       if (headers instanceof Headers) {

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:316:32)

  ‚óè API Client ‚Ä∫ Request Configuration ‚Ä∫ should include Accept header

    TypeError: Cannot read properties of undefined (reading '1')

      330 |
      331 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 332 |       const headers = fetchCall[1]?.headers;
          |                                ^
      333 |
      334 |       let acceptHeader;
      335 |       if (headers instanceof Headers) {

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:332:32)

  ‚óè API Client ‚Ä∫ Response Processing ‚Ä∫ should parse successful JSON responses

    expect(received).toEqual(expected) // deep equality

    Expected: {"id": 1, "name": "Test"}
    Received: []

      355 |
      356 |       expect(result.success).toBe(true);
    > 357 |       expect(result.data).toEqual(mockData);
          |                           ^
      358 |     });
      359 |
      360 |     it("should handle empty responses", async () => {

      at Object.toEqual (lib/__tests__/api-comprehensive.test.ts:357:27)

PASS lib/__tests__/validators.test.ts
PASS __tests__/setup.test.ts
  ‚óè Console

    console.log
      üåê Typed API Client (Browser mode - Nginx proxy)

      at new log (lib/api/typed-client.ts:32:13)

    console.log
      üåê API Client Browser mode - using relative path (Nginx proxy)

      at new log (lib/api/client.ts:41:15)

PASS lib/__tests__/utils.test.ts
------------------------------------------------|---------|----------|---------|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
File                                            | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s
------------------------------------------------|---------|----------|---------|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
All files                                       |   10.29 |      6.8 |    6.75 |   10.56 |
 frontend                                       |   16.66 |     7.69 |       0 |   17.77 |
  jest.env.js                                   |   44.44 |    14.28 |       0 |   53.33 | 14-18,25-28
  test-api-connection.js                        |       0 |        0 |       0 |       0 | 7-61
 frontend/app                                   |       0 |        0 |       0 |       0 |
  layout.tsx                                    |       0 |      100 |       0 |       0 | 3-36
  not-found.tsx                                 |       0 |      100 |       0 |       0 | 1-3
  page.tsx                                      |       0 |        0 |       0 |       0 | 3-425
 frontend/app/admin/test-users                  |       0 |        0 |       0 |       0 |
  page.tsx                                      |       0 |        0 |       0 |       0 | 3-180
 frontend/app/api/v1/download                   |       0 |        0 |       0 |       0 |
  route.ts                                      |       0 |        0 |       0 |       0 | 1-101
 frontend/app/api/v1/preview                    |       0 |        0 |       0 |       0 |
  route.ts                                      |       0 |        0 |       0 |       0 | 1-113
 frontend/app/api/v1/preview-document-example   |       0 |        0 |       0 |       0 |
  route.ts                                      |       0 |        0 |       0 |       0 | 1-116
 frontend/app/api/v1/preview-terms              |       0 |        0 |       0 |       0 |
  route.ts                                      |       0 |        0 |       0 |       0 | 1-115
 frontend/app/auth/sso-callback                 |       0 |        0 |       0 |       0 |
  page.tsx                                      |       0 |        0 |       0 |       0 | 3-231
 frontend/app/dev-login                         |       0 |      100 |       0 |       0 |
  page.tsx                                      |       0 |      100 |       0 |       0 | 1-4
 frontend/components                            |    5.73 |     4.18 |    2.81 |    5.94 |
  ScholarshipWorkflowMermaid.tsx                |       0 |        0 |       0 |       0 | 3-823
  admin-configuration-management.tsx            |    5.26 |        0 |       0 |    6.42 | 69-2704
  admin-dashboard.tsx                           |       0 |        0 |       0 |       0 | 9-345
  admin-management-interface.tsx                |       0 |        0 |       0 |       0 | 3-3673
  admin-rule-management.tsx                     |       0 |        0 |       0 |       0 | 3-741
  admin-scholarship-dashboard.tsx               |       0 |        0 |       0 |       0 | 3-1484
  admin-scholarship-management-interface.tsx    |       0 |        0 |       0 |       0 | 3-1765
  application-detail-dialog.tsx                 |   20.27 |     2.87 |       8 |   20.37 | 89-94,112,118-146,152-195,210-219,226-227,233-335,341-372,377-431,436-510,515-1108
  application-document-form.tsx                 |       0 |        0 |       0 |       0 | 3-467
  application-field-form.tsx                    |       0 |        0 |       0 |       0 | 3-619
  application-file-upload-dialog.tsx            |       0 |        0 |       0 |       0 | 3-158
  application-form-data-display.tsx             |   79.41 |    74.22 |   85.71 |   79.41 | 83-97,130-134,175-189
  batch-application-file-upload.tsx             |       0 |        0 |       0 |       0 | 3-368
  batch-document-upload.tsx                     |       0 |        0 |       0 |       0 | 3-361
  batch-import-editor.tsx                       |       0 |        0 |       0 |       0 | 3-415
  batch-import-panel.tsx                        |       0 |        0 |       0 |       0 | 3-828
  college-dashboard.tsx                         |       0 |        0 |       0 |       0 | 3-1170
  college-ranking-table.tsx                     |       0 |        0 |       0 |       0 | 3-624
  copy-rules-modal.tsx                          |       0 |        0 |       0 |       0 | 3-239
  create-schedule-dialog.tsx                    |       0 |        0 |       0 |       0 | 2-265
  debug-panel-wrapper.tsx                       |       0 |        0 |       0 |       0 | 3-29
  debug-panel.tsx                               |       0 |        0 |       0 |       0 | 3-810
  dev-login-page.tsx                            |   12.76 |        0 |       0 |   12.76 | 64-345
  developer-profile-manager.tsx                 |       0 |        0 |       0 |       0 | 9-13
  dynamic-application-form.tsx                  |    9.72 |        0 |       0 |    9.92 | 64-724
  edit-schedule-dialog.tsx                      |       0 |        0 |       0 |       0 | 3-290
  email-automation-management.tsx               |       0 |        0 |       0 |       0 | 3-715
  email-history-table.tsx                       |       0 |        0 |       0 |       0 | 3-526
  email-test-mode-banner.tsx                    |       0 |        0 |       0 |       0 | 3-91
  email-test-mode-panel.tsx                     |       0 |        0 |       0 |       0 | 3-671
  enhanced-admin-dashboard.tsx                  |       0 |        0 |       0 |       0 | 8-389
  enhanced-student-portal.tsx                   |   28.21 |    26.44 |   25.25 |   28.53 | 136-187,254-256,260,284-288,304,332-347,411-515,531-699,704-835,840-843,848-863,873-890,895-910,915-916,921-1081,1131-1154,1235,1281-1302,1327-1587,1730-1872,1955-2247
  error-boundary.tsx                            |   19.04 |        0 |       0 |      20 | 19-109
  file-preview-dialog.tsx                       |   40.62 |     6.25 |      25 |   41.37 | 39,44-51,55-67,112-131
  file-upload.tsx                               |    5.64 |        0 |       0 |    5.93 | 24-369
  footer.tsx                                    |       0 |        0 |       0 |       0 | 2-10
  form-validation.tsx                           |       0 |        0 |       0 |       0 | 5-68
  header.tsx                                    |       0 |        0 |       0 |       0 | 2-55
  language-switcher.tsx                         |       0 |        0 |       0 |       0 | 2-40
  mock-sso-login.tsx                            |       0 |        0 |       0 |       0 | 3-248
  nationality-flag.tsx                          |       0 |        0 |       0 |       0 | 1-84
  nationality-selector.tsx                      |       0 |        0 |       0 |       0 | 3-111
  notification-button.tsx                       |     100 |    85.71 |     100 |     100 | 21
  notification-panel.tsx                        |       0 |        0 |       0 |       0 | 3-435
  payment-roster-list.tsx                       |       0 |        0 |       0 |       0 | 2-409
  professor-assignment-dropdown.tsx             |   16.98 |        0 |       0 |      18 | 47-207
  professor-review-component.tsx                |       0 |        0 |       0 |       0 | 3-828
  professor-student-relationship-management.tsx |       0 |        0 |       0 |       0 | 3-909
  progress-timeline.tsx                         |   85.18 |    48.38 |   85.71 |      84 | 76,197-200
  quota-management.tsx                          |       0 |        0 |       0 |       0 | 5-447
  reviewer-dashboard.tsx                        |       0 |        0 |       0 |       0 | 3-470
  roster-management-dashboard.tsx               |       0 |        0 |       0 |       0 | 3-69
  roster-schedule-list.tsx                      |       0 |        0 |       0 |       0 | 3-441
  scheduled-emails-table.tsx                    |       0 |        0 |       0 |       0 | 3-801
  scheduler-status.tsx                          |       0 |        0 |       0 |       0 | 2-327
  scholarship-rule-modal.tsx                    |       0 |        0 |       0 |       0 | 3-568
  scholarship-timeline.tsx                      |   38.51 |     9.35 |   16.66 |   38.77 | 107-114,119-124,145,147,153-162,203-208,241-246,254-325,332-520,525-526,535-536,548-554,604,661-703
  semester-selector.tsx                         |    4.92 |        0 |       0 |     5.1 | 88-462
  simplified-nationality-selector.tsx           |       0 |        0 |       0 |       0 | 3-66
  sso-login-page.tsx                            |       0 |        0 |       0 |       0 | 9-27
  system-configuration-management.tsx           |       0 |        0 |       0 |       0 | 3-532
  theme-provider.tsx                            |       0 |      100 |       0 |       0 | 3-9
  user-edit-modal.tsx                           |       0 |        0 |       0 |       0 | 3-472
  user-permission-management.tsx                |       0 |        0 |       0 |       0 | 3-922
  user-profile-management.tsx                   |    9.22 |        0 |       0 |    9.35 | 81-1154
  whitelist-management-dialog.tsx               |    9.77 |        0 |       0 |   10.23 | 38-433
  whitelist-management.tsx                      |       0 |        0 |       0 |       0 | 14-355
 frontend/components/admin                      |       0 |        0 |       0 |       0 |
  AdminManagementShell.tsx                      |       0 |        0 |       0 |       0 | 3-163
  index.ts                                      |       0 |      100 |     100 |       0 | 2-11
 frontend/components/admin/announcements        |       0 |        0 |       0 |       0 |
  AnnouncementsPanel.tsx                        |       0 |        0 |       0 |       0 | 3-572
 frontend/components/admin/configurations       |       0 |        0 |       0 |       0 |
  ConfigurationsPanel.tsx                       |       0 |        0 |       0 |       0 | 3-31
 frontend/components/admin/dashboard            |       0 |        0 |       0 |       0 |
  DashboardPanel.tsx                            |       0 |        0 |       0 |       0 | 3-40
 frontend/components/admin/email                |       0 |        0 |       0 |       0 |
  EmailPanel.tsx                                |       0 |        0 |       0 |       0 | 3-793
 frontend/components/admin/history              |       0 |        0 |       0 |       0 |
  HistoryPanel.tsx                              |       0 |        0 |       0 |       0 | 3-738
 frontend/components/admin/quota                |       0 |      100 |       0 |       0 |
  QuotaPanel.tsx                                |       0 |      100 |       0 |       0 | 3-5
 frontend/components/admin/rules                |       0 |        0 |       0 |       0 |
  RulesPanel.tsx                                |       0 |        0 |       0 |       0 | 3-31
 frontend/components/admin/settings             |       0 |      100 |       0 |       0 |
  SettingsPanel.tsx                             |       0 |      100 |       0 |       0 | 3-5
 frontend/components/admin/users                |       0 |      100 |       0 |       0 |
  UserManagementPanel.tsx                       |       0 |      100 |       0 |       0 | 3-5
 frontend/components/admin/workflows            |       0 |        0 |       0 |       0 |
  WorkflowsPanel.tsx                            |       0 |        0 |       0 |       0 | 3-12
 frontend/components/providers                  |       0 |        0 |       0 |       0 |
  query-provider.tsx                            |       0 |      100 |       0 |       0 | 3-9
  swr-provider.tsx                              |       0 |        0 |       0 |       0 | 3-21
 frontend/components/quota                      |       0 |        0 |       0 |       0 |
  matrix-quota-table.tsx                        |       0 |        0 |       0 |       0 | 5-401
  quota-stats-card.tsx                          |       0 |        0 |       0 |       0 | 5-151
 frontend/components/ui                         |   14.25 |     0.93 |    1.65 |   14.38 |
  accordion.tsx                                 |       0 |      100 |     100 |       0 | 3-58
  alert-dialog.tsx                              |       0 |      100 |     100 |       0 | 3-140
  alert.tsx                                     |      70 |      100 |     100 |    87.5 | 59
  aspect-ratio.tsx                              |       0 |      100 |     100 |       0 | 3-7
  avatar.tsx                                    |   66.66 |      100 |     100 |   85.71 | 50
  badge.tsx                                     |   83.33 |      100 |     100 |     100 |
  breadcrumb.tsx                                |       0 |        0 |       0 |       0 | 1-114
  button.tsx                                    |      90 |    66.66 |     100 |     100 | 44
  calendar.tsx                                  |       0 |        0 |       0 |       0 | 3-66
  card.tsx                                      |   92.85 |      100 |     100 |   92.85 | 82
  carousel.tsx                                  |       0 |        0 |       0 |       0 | 3-261
  chart.tsx                                     |       0 |        0 |       0 |       0 | 3-364
  checkbox.tsx                                  |     100 |      100 |     100 |     100 |
  collapsible.tsx                               |       0 |      100 |     100 |       0 | 3-11
  command.tsx                                   |    62.5 |      100 |       0 |    62.5 | 144-152
  context-menu.tsx                              |       0 |        0 |       0 |       0 | 3-199
  dialog.tsx                                    |   58.33 |      100 |     100 |   58.33 | 112-121
  drawer.tsx                                    |       0 |        0 |     100 |       0 | 3-117
  dropdown-menu.tsx                             |       0 |        0 |       0 |       0 | 3-199
  form-field.tsx                                |       0 |      100 |       0 |       0 | 4-11
  form.tsx                                      |       0 |        0 |       0 |       0 | 3-178
  hover-card.tsx                                |       0 |        0 |     100 |       0 | 3-29
  input-otp.tsx                                 |       0 |        0 |       0 |       0 | 3-71
  input.tsx                                     |      80 |      100 |       0 |      80 | 22
  label.tsx                                     |     100 |      100 |     100 |     100 |
  menubar.tsx                                   |       0 |        0 |       0 |       0 | 3-235
  modal.tsx                                     |       0 |        0 |       0 |       0 | 3-24
  navigation-menu.tsx                           |       0 |      100 |     100 |       0 | 1-127
  pagination.tsx                                |       0 |        0 |     100 |       0 | 1-116
  popover.tsx                                   |     100 |        0 |     100 |     100 | 15
  progress.tsx                                  |     100 |       50 |     100 |     100 | 30
  radio-group.tsx                               |       0 |      100 |       0 |       0 | 3-44
  resizable.tsx                                 |       0 |        0 |     100 |       0 | 3-45
  scholarship-type-selector.tsx                 |       0 |        0 |       0 |       0 | 3-73
  scroll-area.tsx                               |   71.42 |        0 |     100 |   83.33 | 48
  select.tsx                                    |   79.16 |      100 |     100 |   79.16 | 142,146,148-150
  separator.tsx                                 |      80 |        0 |     100 |      80 | 31
  sheet.tsx                                     |       0 |        0 |     100 |       0 | 3-139
  sidebar.tsx                                   |       0 |        0 |       0 |       0 | 3-760
  skeleton.tsx                                  |      50 |      100 |       0 |      50 | 15
  slider.tsx                                    |       0 |      100 |     100 |       0 | 3-28
  sonner.tsx                                    |       0 |        0 |       0 |       0 | 3-31
  switch.tsx                                    |      80 |      100 |     100 |      80 | 29
  table.tsx                                     |       0 |      100 |     100 |       0 | 1-116
  tabs.tsx                                      |     100 |      100 |     100 |     100 |
  tags-input.tsx                                |       0 |        0 |       0 |       0 | 3-155
  textarea.tsx                                  |      80 |      100 |       0 |      80 | 22
  toast.tsx                                     |       0 |      100 |       0 |       0 | 3-128
  toaster.tsx                                   |       0 |        0 |       0 |       0 | 3-19
  toggle-group.tsx                              |       0 |        0 |       0 |       0 | 3-61
  toggle.tsx                                    |       0 |      100 |     100 |       0 | 3-45
  tooltip.tsx                                   |       0 |        0 |     100 |       0 | 3-30
  use-mobile.tsx                                |       0 |      100 |       0 |       0 | 1-20
  use-toast.ts                                  |       0 |        0 |       0 |       0 | 4-191
 frontend/contexts                              |       0 |        0 |       0 |       0 |
  admin-management-context.tsx                  |       0 |        0 |       0 |       0 | 3-87
  notification-context.tsx                      |       0 |        0 |       0 |       0 | 3-110
 frontend/hooks                                 |   20.72 |     7.71 |   19.41 |    20.7 |
  use-admin.ts                                  |       0 |        0 |       0 |       0 | 1-702
  use-applications.ts                           |     3.7 |        0 |       0 |    3.96 | 6-224
  use-auth.tsx                                  |      35 |    16.66 |   57.14 |      35 | 45-61,73-118,123-143,149-165
  use-language-preference.ts                    |   88.88 |    76.92 |   83.33 |   86.95 | 22,39-40
  use-mobile.tsx                                |     100 |      100 |     100 |     100 |
  use-notification-count.ts                     |       0 |        0 |       0 |       0 | 3-24
  use-quota-data.ts                             |       0 |        0 |       0 |       0 | 11-72
  use-scholarship-permissions.ts                |    65.9 |    63.15 |   63.63 |   69.13 | 42-48,81-91,110-115,132,145-148,153-156,175-188
  use-toast.ts                                  |   17.54 |        0 |       0 |   18.86 | 28-29,59-71,75-124,134-191
 frontend/hooks/admin                           |       0 |        0 |       0 |       0 |
  use-dashboard.ts                              |       0 |        0 |       0 |       0 | 3-28
  use-workflows.ts                              |       0 |        0 |       0 |       0 | 3-35
 frontend/lib                                   |   17.48 |    23.65 |    5.83 |   18.98 |
  api.legacy.ts                                 |       0 |        0 |       0 |       0 | 1211-4089
  college-mappings.ts                           |       0 |        0 |       0 |       0 | 11-80
  enums.ts                                      |   46.06 |        0 |       0 |   56.16 | 74-86,93-105,112-126,133-151,158-174,181-195,202-216,223-237,393-405,412-428,435-447,454-472,479-515,522-536,570-596,603-619
  i18n.ts                                       |      75 |       50 |     100 |     100 | 629
  use-is-mounted.ts                             |       0 |      100 |       0 |       0 | 1-14
  utils.ts                                      |   21.73 |        0 |   33.33 |    23.8 | 13-55
  validation.ts                                 |   98.48 |    75.82 |      90 |   98.48 | 26
  validators.ts                                 |     100 |      100 |     100 |     100 |
 frontend/lib/api                               |   62.08 |    38.34 |   58.33 |   61.76 |
  client.ts                                     |   58.49 |    44.21 |      80 |   59.22 | 18-26,44-45,79-97,162-174,183-188,201-219,239,260,268,284-293
  compat.ts                                     |   20.68 |    14.28 |   16.66 |   20.68 | 44-55,69,91-134
  index.ts                                      |   92.15 |      100 |     100 |   91.66 | 103-105,191
  typed-client.ts                               |      64 |       50 |   57.14 |    62.5 | 53-70,89-96,125
 frontend/lib/api/modules                       |   33.28 |    14.54 |   33.06 |   33.54 |
  admin.ts                                      |    12.5 |      100 |   10.95 |    12.5 | 40-63,94-107,133-314,333-428,452-637,654-706,725-899
  application-fields.ts                         |   27.77 |       10 |   28.57 |   28.57 | 85-102,126-141,164-243
  applications.ts                               |   52.38 |    21.42 |   56.25 |   52.38 | 49-66,91-94,139-147,183-186,231-269
  auth.ts                                       |   44.44 |    22.22 |      50 |   44.44 | 48,82-86,107-160
  bank-verification.ts                          |     100 |      100 |     100 |     100 |
  batch-import.ts                               |   12.12 |        0 |      25 |   12.12 | 137-150,177-226,257-366
  college.ts                                    |      50 |      100 |   45.45 |      50 | 55-58,86-137,174-175
  email-automation.ts                           |      50 |      100 |   42.85 |      50 | 42-71,90-91
  email-management.ts                           |   39.39 |       50 |   33.33 |   39.39 | 109-125,152-206,248-288
  notifications.ts                              |      50 |      100 |   44.44 |      50 | 100-151
  professor-student.ts                          |   66.66 |      100 |      60 |   66.66 | 93-110
  professor.ts                                  |   61.53 |       40 |   57.14 |   61.53 | 48-52,68-85,126-152
  quota.ts                                      |   17.85 |        0 |      25 |   19.23 | 97-100,121-263
  reference-data.ts                             |   83.33 |      100 |      80 |   83.33 | 81-82
  scholarships.ts                               |   85.71 |      100 |   83.33 |   85.71 | 52-53
  system-settings.ts                            |   36.36 |        0 |      30 |   36.36 | 87-123,146-184
  user-profiles.ts                              |   31.25 |      100 |   28.57 |   31.25 | 81-97,120-187,210-226
  users.ts                                      |   38.46 |      100 |   33.33 |   38.46 | 122-136,160-225
  whitelist.ts                                  |   33.33 |       10 |      50 |   33.33 | 101-192
 frontend/lib/api/schemas                       |       0 |      100 |     100 |       0 |
  user.schema.ts                                |       0 |      100 |     100 |       0 | 18-53
 frontend/lib/utils                             |   98.64 |     92.3 |    90.9 |   98.41 |
  application-helpers.ts                        |   98.64 |     92.3 |    90.9 |   98.41 | 164
 frontend/lib/validations                       |    3.03 |        0 |       0 |    3.03 |
  user-profile.ts                               |    3.03 |        0 |       0 |    3.03 | 30-123
 frontend/services/admin                        |       0 |        0 |       0 |       0 |
  announcements.ts                              |       0 |        0 |       0 |       0 | 6-41
  index.ts                                      |       0 |      100 |     100 |       0 | 1-2
  workflows.ts                                  |       0 |      100 |       0 |       0 | 1-5
 frontend/services/api                          |       0 |        0 |       0 |       0 |
  quotaApi.ts                                   |       0 |        0 |       0 |       0 | 19-248
 frontend/src/services/api                      |       0 |        0 |       0 |       0 |
  configApi.ts                                  |       0 |        0 |       0 |       0 | 4-117
  scholarshipConfigApi.ts                       |       0 |        0 |       0 |       0 | 3-212
 frontend/src/utils                             |       0 |        0 |       0 |       0 |
  dateUtils.ts                                  |       0 |        0 |       0 |       0 | 10-127
 frontend/types                                 |       0 |        0 |       0 |       0 |
  quota.ts                                      |       0 |        0 |       0 |       0 | 6-170
  scholarship.ts                                |       0 |      100 |     100 |       0 | 1
------------------------------------------------|---------|----------|---------|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Jest: "global" coverage threshold for branches (7%) not met: 6.8%

Summary of all failing tests
FAIL lib/api/__tests__/modular-api.test.ts
  ‚óè Modular API Structure ‚Ä∫ Auth Module - Login Functionality ‚Ä∫ should call login and set token on success

    expect(received).toEqual(expected) // deep equality

    - Expected  - 15
    + Received  +  2

      Object {
    -   "data": Object {
    -     "access_token": "test-token-123",
    -     "expires_in": 3600,
    -     "token_type": "Bearer",
    -     "user": Object {
    -       "created_at": "2025-01-01",
    -       "email": "test@example.com",
    -       "id": "1",
    -       "name": "Test User",
    -       "nycu_id": "testuser",
    -       "role": "student",
    -       "updated_at": "2025-01-01",
    -     },
    -   },
    -   "message": "Login successful",
    +   "data": Array [],
    +   "message": "Request completed successfully",
        "success": true,
      }

      108 |       const result = await api.auth.login('testuser', 'password123');
      109 |
    > 110 |       expect(result).toEqual(mockResponse);
          |                      ^
      111 |       expect(mockFetch).toHaveBeenCalledWith(
      112 |         '/api/v1/auth/login',
      113 |         expect.objectContaining({

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:110:22)

  ‚óè Modular API Structure ‚Ä∫ Auth Module - Login Functionality ‚Ä∫ should handle login failure

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": [], "message": "Request completed successfully", "success": true}

      128 |       });
      129 |
    > 130 |       await expect(api.auth.login('wrong', 'credentials')).rejects.toThrow('Invalid credentials');
          |             ^
      131 |     });
      132 |   });
      133 |

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (lib/api/__tests__/modular-api.test.ts:130:13)

  ‚óè Modular API Structure ‚Ä∫ Auth Module - Logout Functionality ‚Ä∫ should clear token on logout

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      142 |
      143 |       expect(result.success).toBe(true);
    > 144 |       expect(apiClient.hasToken()).toBe(false);
          |                                    ^
      145 |       expect(mockLocalStorage.removeItem).toHaveBeenCalledWith('auth_token');
      146 |     });
      147 |   });

      at Object.toBe (lib/api/__tests__/modular-api.test.ts:144:36)

  ‚óè Modular API Structure ‚Ä∫ Request Method ‚Ä∫ should make authenticated requests

    expect(received).toEqual(expected) // deep equality

    - Expected  -  3
    + Received  + 13

      Object {
        "data": Object {
    -     "id": 1,
    -     "name": "Test",
    +     "access_token": "test-token-123",
    +     "expires_in": 3600,
    +     "token_type": "Bearer",
    +     "user": Object {
    +       "created_at": "2025-01-01",
    +       "email": "test@example.com",
    +       "id": "1",
    +       "name": "Test User",
    +       "nycu_id": "testuser",
    +       "role": "student",
    +       "updated_at": "2025-01-01",
          },
    -   "message": "Success",
    +   },
    +   "message": "Login successful",
        "success": true,
      }

      182 |       const result = await apiClient.request('/test-endpoint');
      183 |
    > 184 |       expect(result).toEqual(mockResponse);
          |                      ^
      185 |       const fetchCall = mockFetch.mock.calls[0];
      186 |       const headers = fetchCall[1].headers;
      187 |       expect(headers.get('Authorization')).toBe('Bearer auth-token-123');

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:184:22)

  ‚óè Modular API Structure ‚Ä∫ Request Method ‚Ä∫ should handle query parameters

    Invalid credentials

      194 |           response.statusText ||
      195 |           `HTTP ${response.status}`;
    > 196 |         throw new Error(msg);
          |               ^
      197 |       }
      198 |
      199 |       // Runtime validation if schema provided

      at ExtendedApiClient.request (lib/api/client.ts:196:15)
      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:197:7)

  ‚óè Modular API Structure ‚Ä∫ Users Module ‚Ä∫ should get user profile

    expect(received).toEqual(expected) // deep equality

    Expected: {"created_at": "2025-01-01", "email": "test@example.com", "id": "1", "name": "Test User", "nycu_id": "testuser", "role": "student", "updated_at": "2025-01-01"}
    Received: []

      234 |
      235 |       expect(result.success).toBe(true);
    > 236 |       expect(result.data).toEqual(mockUser);
          |                           ^
      237 |       expect(mockFetch).toHaveBeenCalledWith(
      238 |         '/api/v1/users/me',
      239 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:236:27)

  ‚óè Modular API Structure ‚Ä∫ Users Module ‚Ä∫ should update user profile

    TypeError: Cannot read properties of undefined (reading '0')

      254 |       expect(result.success).toBe(true);
      255 |       const fetchCall = mockFetch.mock.calls[0];
    > 256 |       expect(fetchCall[0]).toBe('/api/v1/users/me');
          |                       ^
      257 |       expect(fetchCall[1].method).toBe('PUT');
      258 |     });
      259 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:256:23)

  ‚óè Modular API Structure ‚Ä∫ Users Module ‚Ä∫ should get all users with pagination

    TypeError: Cannot read properties of undefined (reading '0')

      276 |
      277 |       const fetchCall = mockFetch.mock.calls[0];
    > 278 |       expect(fetchCall[0]).toBe('/api/v1/users?page=1&size=10');
          |                       ^
      279 |     });
      280 |   });
      281 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:278:23)

  ‚óè Modular API Structure ‚Ä∫ Scholarships Module ‚Ä∫ should get eligible scholarships

    expect(received).toEqual(expected) // deep equality

    - Expected  - 6
    + Received  + 1

    - Array [
    -   Object {
    -     "id": 1,
    -     "name": "Test Scholarship",
    -   },
    - ]
    + Array []

      304 |
      305 |       expect(result.success).toBe(true);
    > 306 |       expect(result.data).toEqual(mockScholarships);
          |                           ^
      307 |       expect(mockFetch).toHaveBeenCalledWith(
      308 |         '/api/v1/scholarships/eligible',
      309 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:306:27)

  ‚óè Modular API Structure ‚Ä∫ Scholarships Module ‚Ä∫ should get scholarship by ID

    expect(received).toEqual(expected) // deep equality

    Expected: {"id": 1, "name": "Test Scholarship"}
    Received: []

      323 |
      324 |       expect(result.success).toBe(true);
    > 325 |       expect(result.data).toEqual(mockScholarship);
          |                           ^
      326 |       expect(mockFetch).toHaveBeenCalledWith(
      327 |         '/api/v1/scholarships/1',
      328 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:325:27)

  ‚óè Modular API Structure ‚Ä∫ Scholarships Module ‚Ä∫ should get all scholarships

    expect(received).toEqual(expected) // deep equality

    - Expected  - 10
    + Received  +  1

    - Array [
    -   Object {
    -     "id": 1,
    -     "name": "Scholarship 1",
    -   },
    -   Object {
    -     "id": 2,
    -     "name": "Scholarship 2",
    -   },
    - ]
    + Array []

      345 |
      346 |       expect(result.success).toBe(true);
    > 347 |       expect(result.data).toEqual(mockScholarships);
          |                           ^
      348 |       expect(mockFetch).toHaveBeenCalledWith(
      349 |         '/api/v1/scholarships',
      350 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:347:27)

  ‚óè Modular API Structure ‚Ä∫ Scholarships Module ‚Ä∫ should create combined PhD scholarship

    TypeError: Cannot read properties of undefined (reading '0')

      381 |       expect(result.success).toBe(true);
      382 |       const fetchCall = mockFetch.mock.calls[0];
    > 383 |       expect(fetchCall[0]).toBe('/api/v1/scholarships/combined/phd');
          |                       ^
      384 |       expect(fetchCall[1].method).toBe('POST');
      385 |     });
      386 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:383:23)

  ‚óè Modular API Structure ‚Ä∫ Applications Module ‚Ä∫ should get my applications

    expect(received).toEqual(expected) // deep equality

    - Expected  - 7
    + Received  + 1

    - Array [
    -   Object {
    -     "id": 1,
    -     "scholarship_type": "academic_excellence",
    -     "status": "submitted",
    -   },
    - ]
    + Array []

      410 |
      411 |       expect(result.success).toBe(true);
    > 412 |       expect(result.data).toEqual(mockApplications);
          |                           ^
      413 |       expect(mockFetch).toHaveBeenCalledWith(
      414 |         '/api/v1/applications',
      415 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:412:27)

  ‚óè Modular API Structure ‚Ä∫ Applications Module ‚Ä∫ should create application

    TypeError: Cannot read properties of undefined (reading '0')

      433 |       expect(result.success).toBe(true);
      434 |       const fetchCall = mockFetch.mock.calls[0];
    > 435 |       expect(fetchCall[0]).toBe('/api/v1/applications');
          |                       ^
      436 |       expect(fetchCall[1].method).toBe('POST');
      437 |     });
      438 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:435:23)

  ‚óè Modular API Structure ‚Ä∫ Applications Module ‚Ä∫ should submit application

    TypeError: Cannot read properties of undefined (reading '0')

      448 |       expect(result.success).toBe(true);
      449 |       const fetchCall = mockFetch.mock.calls[0];
    > 450 |       expect(fetchCall[0]).toBe('/api/v1/applications/1/submit');
          |                       ^
      451 |       expect(fetchCall[1].method).toBe('POST');
      452 |     });
      453 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:450:23)

  ‚óè Modular API Structure ‚Ä∫ Notifications Module ‚Ä∫ should get notifications

    expect(received).toEqual(expected) // deep equality

    - Expected  - 8
    + Received  + 1

    - Array [
    -   Object {
    -     "id": 1,
    -     "is_read": false,
    -     "message": "Test notification",
    -     "title": "Test",
    -   },
    - ]
    + Array []

      477 |
      478 |       expect(result.success).toBe(true);
    > 479 |       expect(result.data).toEqual(mockNotifications);
          |                           ^
      480 |       expect(mockFetch).toHaveBeenCalledWith(
      481 |         '/api/v1/notifications',
      482 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:479:27)

  ‚óè Modular API Structure ‚Ä∫ Notifications Module ‚Ä∫ should get unread count

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: []

      494 |
      495 |       expect(result.success).toBe(true);
    > 496 |       expect(result.data).toBe(5);
          |                           ^
      497 |       expect(mockFetch).toHaveBeenCalledWith(
      498 |         '/api/v1/notifications/unread-count',
      499 |         expect.any(Object)

      at Object.toBe (lib/api/__tests__/modular-api.test.ts:496:27)

  ‚óè Modular API Structure ‚Ä∫ Notifications Module ‚Ä∫ should mark notification as read

    TypeError: Cannot read properties of undefined (reading '0')

      512 |       expect(result.success).toBe(true);
      513 |       const fetchCall = mockFetch.mock.calls[0];
    > 514 |       expect(fetchCall[0]).toBe('/api/v1/notifications/1/read');
          |                       ^
      515 |       expect(fetchCall[1].method).toBe('PATCH');
      516 |     });
      517 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:514:23)

  ‚óè Modular API Structure ‚Ä∫ Quota Module ‚Ä∫ should get available semesters

    expect(received).toEqual(expected) // deep equality

    - Expected  - 7
    + Received  + 1

    - Array [
    -   Object {
    -     "display_name": "2024 Á¨¨‰∏ÄÂ≠∏Êúü",
    -     "period": "2024-1",
    -     "quota_management_mode": "matrix_based",
    -   },
    - ]
    + Array []

      541 |
      542 |       expect(result.success).toBe(true);
    > 543 |       expect(result.data).toEqual(mockSemesters);
          |                           ^
      544 |       expect(mockFetch).toHaveBeenCalledWith(
      545 |         '/api/v1/scholarship-configurations/available-semesters',
      546 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:543:27)

  ‚óè Modular API Structure ‚Ä∫ Quota Module ‚Ä∫ should get quota overview

    expect(received).toEqual(expected) // deep equality

    - Expected  - 8
    + Received  + 1

    - Array [
    -   Object {
    -     "remaining_quota": 50,
    -     "scholarship_type": "phd",
    -     "total_quota": 100,
    -     "used_quota": 50,
    -   },
    - ]
    + Array []

      562 |
      563 |       expect(result.success).toBe(true);
    > 564 |       expect(result.data).toEqual(mockOverview);
          |                           ^
      565 |       expect(mockFetch).toHaveBeenCalledWith(
      566 |         '/api/v1/scholarship-configurations/overview/2024-1',
      567 |         expect.any(Object)

      at Object.toEqual (lib/api/__tests__/modular-api.test.ts:564:27)

  ‚óè Modular API Structure ‚Ä∫ Quota Module ‚Ä∫ should update matrix quota

    TypeError: Cannot read properties of undefined (reading '0')

      587 |       expect(result.success).toBe(true);
      588 |       const fetchCall = mockFetch.mock.calls[0];
    > 589 |       expect(fetchCall[0]).toBe('/api/v1/scholarship-configurations/matrix-quota');
          |                       ^
      590 |       expect(fetchCall[1].method).toBe('PUT');
      591 |     });
      592 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:589:23)

  ‚óè Modular API Structure ‚Ä∫ Professor Module ‚Ä∫ should get applications for review

    TypeError: Cannot read properties of undefined (reading '0')

      612 |       expect(result.data).toEqual([]);
      613 |       const fetchCall = mockFetch.mock.calls[0];
    > 614 |       expect(fetchCall[0]).toBe('/api/v1/professor/applications?status_filter=pending');
          |                       ^
      615 |     });
      616 |
      617 |     it('should get professor stats', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:614:23)

  ‚óè Modular API Structure ‚Ä∫ Professor Module ‚Ä∫ should get professor stats

    TypeError: Cannot read properties of undefined (reading '0')

      630 |       expect(result.success).toBe(true);
      631 |       const fetchCall = mockFetch.mock.calls[0];
    > 632 |       expect(fetchCall[0]).toBe('/api/v1/professor/stats');
          |                       ^
      633 |     });
      634 |
      635 |     it('should submit professor review', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:632:23)

  ‚óè Modular API Structure ‚Ä∫ Professor Module ‚Ä∫ should submit professor review

    TypeError: Cannot read properties of undefined (reading '0')

      648 |       expect(result.success).toBe(true);
      649 |       const fetchCall = mockFetch.mock.calls[0];
    > 650 |       expect(fetchCall[0]).toBe('/api/v1/professor/applications/1/review');
          |                       ^
      651 |       expect(fetchCall[1].method).toBe('POST');
      652 |     });
      653 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:650:23)

  ‚óè Modular API Structure ‚Ä∫ College Module ‚Ä∫ should get applications for college review

    TypeError: Cannot read properties of undefined (reading '0')

      669 |       expect(result.success).toBe(true);
      670 |       const fetchCall = mockFetch.mock.calls[0];
    > 671 |       expect(fetchCall[0]).toBe('/api/v1/college/applications?status=pending');
          |                       ^
      672 |     });
      673 |
      674 |     it('should get college rankings', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:671:23)

  ‚óè Modular API Structure ‚Ä∫ College Module ‚Ä∫ should get college rankings

    TypeError: Cannot read properties of undefined (reading '0')

      683 |       expect(result.success).toBe(true);
      684 |       const fetchCall = mockFetch.mock.calls[0];
    > 685 |       expect(fetchCall[0]).toBe('/api/v1/college/rankings?academic_year=113&semester=first');
          |                       ^
      686 |     });
      687 |
      688 |     it('should create college ranking', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:685:23)

  ‚óè Modular API Structure ‚Ä∫ College Module ‚Ä∫ should create college ranking

    TypeError: Cannot read properties of undefined (reading '0')

      703 |       expect(result.success).toBe(true);
      704 |       const fetchCall = mockFetch.mock.calls[0];
    > 705 |       expect(fetchCall[0]).toBe('/api/v1/college/rankings');
          |                       ^
      706 |       expect(fetchCall[1].method).toBe('POST');
      707 |     });
      708 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:705:23)

  ‚óè Modular API Structure ‚Ä∫ College Module ‚Ä∫ should get college statistics

    TypeError: Cannot read properties of undefined (reading '0')

      718 |       expect(result.success).toBe(true);
      719 |       const fetchCall = mockFetch.mock.calls[0];
    > 720 |       expect(fetchCall[0]).toBe('/api/v1/college/statistics?academic_year=113&semester=first');
          |                       ^
      721 |     });
      722 |   });
      723 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:720:23)

  ‚óè Modular API Structure ‚Ä∫ Whitelist Module ‚Ä∫ should toggle scholarship whitelist

    TypeError: Cannot read properties of undefined (reading '0')

      738 |       expect(result.success).toBe(true);
      739 |       const fetchCall = mockFetch.mock.calls[0];
    > 740 |       expect(fetchCall[0]).toBe('/api/v1/scholarships/1/whitelist');
          |                       ^
      741 |       expect(fetchCall[1].method).toBe('PATCH');
      742 |     });
      743 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:740:23)

  ‚óè Modular API Structure ‚Ä∫ Whitelist Module ‚Ä∫ should get configuration whitelist

    TypeError: Cannot read properties of undefined (reading '0')

      753 |       expect(result.success).toBe(true);
      754 |       const fetchCall = mockFetch.mock.calls[0];
    > 755 |       expect(fetchCall[0]).toBe('/api/v1/scholarship-configurations/1/whitelist?page=1&size=10');
          |                       ^
      756 |     });
      757 |
      758 |     it('should batch add to whitelist', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:755:23)

  ‚óè Modular API Structure ‚Ä∫ Whitelist Module ‚Ä∫ should batch add to whitelist

    TypeError: Cannot read properties of undefined (reading '0')

      773 |       expect(result.success).toBe(true);
      774 |       const fetchCall = mockFetch.mock.calls[0];
    > 775 |       expect(fetchCall[0]).toBe('/api/v1/scholarship-configurations/1/whitelist/batch');
          |                       ^
      776 |       expect(fetchCall[1].method).toBe('POST');
      777 |     });
      778 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:775:23)

  ‚óè Modular API Structure ‚Ä∫ System Settings Module ‚Ä∫ should get all configurations

    TypeError: Cannot read properties of undefined (reading '0')

      794 |       expect(result.success).toBe(true);
      795 |       const fetchCall = mockFetch.mock.calls[0];
    > 796 |       expect(fetchCall[0]).toBe('/api/v1/system-settings?category=email&include_sensitive=true');
          |                       ^
      797 |     });
      798 |
      799 |     it('should validate configuration', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:796:23)

  ‚óè Modular API Structure ‚Ä∫ System Settings Module ‚Ä∫ should validate configuration

    TypeError: Cannot read properties of undefined (reading '0')

      816 |       expect(result.success).toBe(true);
      817 |       const fetchCall = mockFetch.mock.calls[0];
    > 818 |       expect(fetchCall[0]).toBe('/api/v1/system-settings/validate');
          |                       ^
      819 |       expect(fetchCall[1].method).toBe('POST');
      820 |     });
      821 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:818:23)

  ‚óè Modular API Structure ‚Ä∫ Bank Verification Module ‚Ä∫ should verify single bank account

    TypeError: Cannot read properties of undefined (reading '0')

      841 |       expect(result.success).toBe(true);
      842 |       const fetchCall = mockFetch.mock.calls[0];
    > 843 |       expect(fetchCall[0]).toBe('/api/v1/admin/bank-verification');
          |                       ^
      844 |       expect(fetchCall[1].method).toBe('POST');
      845 |     });
      846 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:843:23)

  ‚óè Modular API Structure ‚Ä∫ Bank Verification Module ‚Ä∫ should verify batch bank accounts

    TypeError: Cannot read properties of undefined (reading '0')

      860 |       expect(result.success).toBe(true);
      861 |       const fetchCall = mockFetch.mock.calls[0];
    > 862 |       expect(fetchCall[0]).toBe('/api/v1/admin/bank-verification/batch');
          |                       ^
      863 |       expect(fetchCall[1].method).toBe('POST');
      864 |     });
      865 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:862:23)

  ‚óè Modular API Structure ‚Ä∫ Professor-Student Module ‚Ä∫ should get professor-student relationships

    TypeError: Cannot read properties of undefined (reading '0')

      884 |       expect(result.success).toBe(true);
      885 |       const fetchCall = mockFetch.mock.calls[0];
    > 886 |       expect(fetchCall[0]).toBe('/api/v1/professor-student?professor_id=1&status=active');
          |                       ^
      887 |     });
      888 |
      889 |     it('should create professor-student relationship', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:886:23)

  ‚óè Modular API Structure ‚Ä∫ Professor-Student Module ‚Ä∫ should create professor-student relationship

    TypeError: Cannot read properties of undefined (reading '0')

      902 |       expect(result.success).toBe(true);
      903 |       const fetchCall = mockFetch.mock.calls[0];
    > 904 |       expect(fetchCall[0]).toBe('/api/v1/professor-student');
          |                       ^
      905 |       expect(fetchCall[1].method).toBe('POST');
      906 |     });
      907 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:904:23)

  ‚óè Modular API Structure ‚Ä∫ Email Automation Module ‚Ä∫ should get automation rules

    TypeError: Cannot read properties of undefined (reading '0')

      923 |       expect(result.success).toBe(true);
      924 |       const fetchCall = mockFetch.mock.calls[0];
    > 925 |       expect(fetchCall[0]).toBe('/api/v1/email-automation?is_active=true');
          |                       ^
      926 |     });
      927 |
      928 |     it('should toggle automation rule', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:925:23)

  ‚óè Modular API Structure ‚Ä∫ Email Automation Module ‚Ä∫ should toggle automation rule

    TypeError: Cannot read properties of undefined (reading '0')

      937 |       expect(result.success).toBe(true);
      938 |       const fetchCall = mockFetch.mock.calls[0];
    > 939 |       expect(fetchCall[0]).toBe('/api/v1/email-automation/1/toggle');
          |                       ^
      940 |       expect(fetchCall[1].method).toBe('PATCH');
      941 |     });
      942 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:939:23)

  ‚óè Modular API Structure ‚Ä∫ Batch Import Module ‚Ä∫ should get batch import history

    TypeError: Cannot read properties of undefined (reading '0')

      962 |       expect(result.success).toBe(true);
      963 |       const fetchCall = mockFetch.mock.calls[0];
    > 964 |       expect(fetchCall[0]).toBe('/api/v1/college/batch-import/history?limit=10');
          |                       ^
      965 |     });
      966 |
      967 |     it('should confirm batch import', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:964:23)

  ‚óè Modular API Structure ‚Ä∫ Batch Import Module ‚Ä∫ should confirm batch import

    TypeError: Cannot read properties of undefined (reading '0')

      980 |       expect(result.success).toBe(true);
      981 |       const fetchCall = mockFetch.mock.calls[0];
    > 982 |       expect(fetchCall[0]).toBe('/api/v1/college/batch-import/batch-123/confirm');
          |                       ^
      983 |       expect(fetchCall[1].method).toBe('POST');
      984 |     });
      985 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:982:23)

  ‚óè Modular API Structure ‚Ä∫ Reference Data Module ‚Ä∫ should get all academies

    TypeError: Cannot read properties of undefined (reading '0')

      1005 |       expect(result.success).toBe(true);
      1006 |       const fetchCall = mockFetch.mock.calls[0];
    > 1007 |       expect(fetchCall[0]).toBe('/api/v1/reference-data/academies');
           |                       ^
      1008 |     });
      1009 |
      1010 |     it('should get all reference data', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1007:23)

  ‚óè Modular API Structure ‚Ä∫ Reference Data Module ‚Ä∫ should get all reference data

    TypeError: Cannot read properties of undefined (reading '0')

      1031 |       expect(result.success).toBe(true);
      1032 |       const fetchCall = mockFetch.mock.calls[0];
    > 1033 |       expect(fetchCall[0]).toBe('/api/v1/reference-data/all');
           |                       ^
      1034 |     });
      1035 |
      1036 |     it('should get scholarship periods', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1033:23)

  ‚óè Modular API Structure ‚Ä∫ Reference Data Module ‚Ä∫ should get scholarship periods

    TypeError: Cannot read properties of undefined (reading '0')

      1058 |       expect(result.success).toBe(true);
      1059 |       const fetchCall = mockFetch.mock.calls[0];
    > 1060 |       expect(fetchCall[0]).toBe('/api/v1/reference-data/scholarship-periods?scholarship_id=1&application_cycle=semester');
           |                       ^
      1061 |     });
      1062 |   });
      1063 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1060:23)

  ‚óè Modular API Structure ‚Ä∫ Application Fields Module ‚Ä∫ should get form config

    TypeError: Cannot read properties of undefined (reading '0')

      1082 |       expect(result.success).toBe(true);
      1083 |       const fetchCall = mockFetch.mock.calls[0];
    > 1084 |       expect(fetchCall[0]).toBe('/api/v1/application-fields/form-config/test?include_inactive=false');
           |                       ^
      1085 |     });
      1086 |
      1087 |     it('should create field', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1084:23)

  ‚óè Modular API Structure ‚Ä∫ Application Fields Module ‚Ä∫ should create field

    TypeError: Cannot read properties of undefined (reading '0')

      1117 |       expect(result.success).toBe(true);
      1118 |       const fetchCall = mockFetch.mock.calls[0];
    > 1119 |       expect(fetchCall[0]).toBe('/api/v1/application-fields/fields');
           |                       ^
      1120 |       expect(fetchCall[1].method).toBe('POST');
      1121 |     });
      1122 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1119:23)

  ‚óè Modular API Structure ‚Ä∫ Application Fields Module ‚Ä∫ should get documents

    TypeError: Cannot read properties of undefined (reading '0')

      1136 |       expect(result.success).toBe(true);
      1137 |       const fetchCall = mockFetch.mock.calls[0];
    > 1138 |       expect(fetchCall[0]).toBe('/api/v1/application-fields/documents/test');
           |                       ^
      1139 |     });
      1140 |   });
      1141 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1138:23)

  ‚óè Modular API Structure ‚Ä∫ User Profiles Module ‚Ä∫ should get my profile

    TypeError: Cannot read properties of undefined (reading '0')

      1165 |       expect(result.success).toBe(true);
      1166 |       const fetchCall = mockFetch.mock.calls[0];
    > 1167 |       expect(fetchCall[0]).toBe('/api/v1/user-profiles/me');
           |                       ^
      1168 |     });
      1169 |
      1170 |     it('should update bank info', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1167:23)

  ‚óè Modular API Structure ‚Ä∫ User Profiles Module ‚Ä∫ should update bank info

    TypeError: Cannot read properties of undefined (reading '0')

      1187 |       expect(result.success).toBe(true);
      1188 |       const fetchCall = mockFetch.mock.calls[0];
    > 1189 |       expect(fetchCall[0]).toBe('/api/v1/user-profiles/me/bank-info');
           |                       ^
      1190 |       expect(fetchCall[1].method).toBe('PUT');
      1191 |     });
      1192 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1189:23)

  ‚óè Modular API Structure ‚Ä∫ User Profiles Module ‚Ä∫ should get incomplete profiles (admin)

    TypeError: Cannot read properties of undefined (reading '0')

      1206 |       expect(result.success).toBe(true);
      1207 |       const fetchCall = mockFetch.mock.calls[0];
    > 1208 |       expect(fetchCall[0]).toBe('/api/v1/user-profiles/admin/incomplete');
           |                       ^
      1209 |     });
      1210 |   });
      1211 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1208:23)

  ‚óè Modular API Structure ‚Ä∫ Email Management Module ‚Ä∫ should get email history

    TypeError: Cannot read properties of undefined (reading '0')

      1235 |       expect(result.success).toBe(true);
      1236 |       const fetchCall = mockFetch.mock.calls[0];
    > 1237 |       expect(fetchCall[0]).toContain('/api/v1/email-management/history');
           |                       ^
      1238 |     });
      1239 |
      1240 |     it('should approve scheduled email', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1237:23)

  ‚óè Modular API Structure ‚Ä∫ Email Management Module ‚Ä∫ should approve scheduled email

    TypeError: Cannot read properties of undefined (reading '0')

      1253 |       expect(result.success).toBe(true);
      1254 |       const fetchCall = mockFetch.mock.calls[0];
    > 1255 |       expect(fetchCall[0]).toBe('/api/v1/email-management/scheduled/1/approve');
           |                       ^
      1256 |       expect(fetchCall[1].method).toBe('PATCH');
      1257 |     });
      1258 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1255:23)

  ‚óè Modular API Structure ‚Ä∫ Email Management Module ‚Ä∫ should get test mode status

    TypeError: Cannot read properties of undefined (reading '0')

      1276 |       expect(result.success).toBe(true);
      1277 |       const fetchCall = mockFetch.mock.calls[0];
    > 1278 |       expect(fetchCall[0]).toBe('/api/v1/email-management/test-mode/status');
           |                       ^
      1279 |     });
      1280 |
      1281 |     it('should enable test mode', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1278:23)

  ‚óè Modular API Structure ‚Ä∫ Email Management Module ‚Ä∫ should enable test mode

    TypeError: Cannot read properties of undefined (reading '0')

      1303 |       expect(result.success).toBe(true);
      1304 |       const fetchCall = mockFetch.mock.calls[0];
    > 1305 |       expect(fetchCall[0]).toContain('/api/v1/email-management/test-mode/enable');
           |                       ^
      1306 |       expect(fetchCall[0]).toContain('redirect_emails=test%40example.com'); // @ is URL-encoded to %40
      1307 |       expect(fetchCall[0]).toContain('duration_hours=24');
      1308 |       expect(fetchCall[1].method).toBe('POST');

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1305:23)

  ‚óè Modular API Structure ‚Ä∫ Admin Module ‚Ä∫ should get dashboard stats

    TypeError: Cannot read properties of undefined (reading '0')

      1330 |       expect(result.success).toBe(true);
      1331 |       const fetchCall = mockFetch.mock.calls[0];
    > 1332 |       expect(fetchCall[0]).toBe('/api/v1/admin/dashboard/stats');
           |                       ^
      1333 |     });
      1334 |
      1335 |     it('should get all applications', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1332:23)

  ‚óè Modular API Structure ‚Ä∫ Admin Module ‚Ä∫ should get all applications

    TypeError: Cannot read properties of undefined (reading '0')

      1348 |       expect(result.success).toBe(true);
      1349 |       const fetchCall = mockFetch.mock.calls[0];
    > 1350 |       expect(fetchCall[0]).toBe('/api/v1/admin/applications?page=1&size=10&status=pending');
           |                       ^
      1351 |     });
      1352 |
      1353 |     it('should create announcement', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1350:23)

  ‚óè Modular API Structure ‚Ä∫ Admin Module ‚Ä∫ should create announcement

    TypeError: Cannot read properties of undefined (reading '0')

      1366 |       expect(result.success).toBe(true);
      1367 |       const fetchCall = mockFetch.mock.calls[0];
    > 1368 |       expect(fetchCall[0]).toBe('/api/v1/admin/announcements');
           |                       ^
      1369 |       expect(fetchCall[1].method).toBe('POST');
      1370 |     });
      1371 |

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1368:23)

  ‚óè Modular API Structure ‚Ä∫ Admin Module ‚Ä∫ should get scholarship rules

    TypeError: Cannot read properties of undefined (reading '0')

      1385 |       expect(result.success).toBe(true);
      1386 |       const fetchCall = mockFetch.mock.calls[0];
    > 1387 |       expect(fetchCall[0]).toBe('/api/v1/admin/scholarship-rules?scholarship_type_id=1');
           |                       ^
      1388 |     });
      1389 |
      1390 |     it('should create scholarship configuration', async () => {

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1387:23)

  ‚óè Modular API Structure ‚Ä∫ Admin Module ‚Ä∫ should create scholarship configuration

    TypeError: Cannot read properties of undefined (reading '0')

      1407 |       expect(result.success).toBe(true);
      1408 |       const fetchCall = mockFetch.mock.calls[0];
    > 1409 |       expect(fetchCall[0]).toBe('/api/v1/scholarship-configurations/configurations');
           |                       ^
      1410 |       expect(fetchCall[1].method).toBe('POST');
      1411 |     });
      1412 |   });

      at Object.<anonymous> (lib/api/__tests__/modular-api.test.ts:1409:23)

FAIL lib/__tests__/api.test.ts
  ‚óè API Client ‚Ä∫ Authentication ‚Ä∫ should login successfully with valid credentials

    TypeError: Cannot read properties of undefined (reading '0')

      49 |
      50 |       const fetchCall = mockFetch.mock.calls[0];
    > 51 |       expect(fetchCall[0]).toBe("/api/v1/auth/login");
         |                       ^
      52 |       expect(fetchCall[1].method).toBe("POST");
      53 |       expect(fetchCall[1].body).toBe(
      54 |         JSON.stringify({ username: "testuser", password: "password" })

      at Object.<anonymous> (lib/__tests__/api.test.ts:51:23)

  ‚óè API Client ‚Ä∫ Authentication ‚Ä∫ should handle login failure

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": [], "message": "Request completed successfully", "success": true}

      69 |       });
      70 |
    > 71 |       await expect(
         |             ^
      72 |         apiClient.auth.login("invalid", "credentials")
      73 |       ).rejects.toThrow("Invalid credentials");
      74 |     });

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (lib/__tests__/api.test.ts:71:13)

  ‚óè API Client ‚Ä∫ Authentication ‚Ä∫ should get current user with valid token

    TypeError: Cannot read properties of undefined (reading '1')

      103 |
      104 |       const fetchCall = mockFetch.mock.calls[0];
    > 105 |       const headers = fetchCall[1]?.headers;
          |                                ^
      106 |
      107 |       expect(getHeader(headers, "Authorization")).toBe("Bearer test-token");
      108 |       expect(result.data).toEqual(mockUser);

      at Object.<anonymous> (lib/__tests__/api.test.ts:105:32)

  ‚óè API Client ‚Ä∫ Applications ‚Ä∫ should fetch user applications

    TypeError: Cannot read properties of undefined (reading '0')

      143 |
      144 |       const fetchCall = mockFetch.mock.calls[0];
    > 145 |       expect(fetchCall[0]).toContain("/applications");
          |                       ^
      146 |       expect(getHeader(fetchCall[1]?.headers, "Authorization")).toBe(
      147 |         "Bearer test-token"
      148 |       );

      at Object.<anonymous> (lib/__tests__/api.test.ts:145:23)

  ‚óè API Client ‚Ä∫ Applications ‚Ä∫ should create new application

    TypeError: Cannot read properties of undefined (reading '1')

      182 |
      183 |       const fetchCall = mockFetch.mock.calls[0];
    > 184 |       const headers = fetchCall[1]?.headers;
          |                                ^
      185 |
      186 |       expect(fetchCall[0]).toContain("/applications");
      187 |       expect(fetchCall[1].method).toBe("POST");

      at Object.<anonymous> (lib/__tests__/api.test.ts:184:32)

  ‚óè API Client ‚Ä∫ Applications ‚Ä∫ should submit application

    TypeError: Cannot read properties of undefined (reading '0')

      215 |
      216 |       const fetchCall = mockFetch.mock.calls[0];
    > 217 |       expect(fetchCall[0]).toBe(
          |                       ^
      218 |         `/api/v1/applications/${applicationId}/submit`
      219 |       );
      220 |       expect(fetchCall[1].method).toBe("POST");

      at Object.<anonymous> (lib/__tests__/api.test.ts:217:23)

  ‚óè API Client ‚Ä∫ Error Handling ‚Ä∫ should handle network errors

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": [], "message": "Request completed successfully", "success": true}

      246 |       mockFetch.mockRejectedValueOnce(new Error("Network error"));
      247 |
    > 248 |       await expect(apiClient.auth.getCurrentUser()).rejects.toThrow(
          |             ^
      249 |         "Network error"
      250 |       );
      251 |     });

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (lib/__tests__/api.test.ts:248:13)

  ‚óè API Client ‚Ä∫ Error Handling ‚Ä∫ should handle HTTP errors

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"data": [], "message": "Request completed successfully", "success": true}

      262 |       });
      263 |
    > 264 |       await expect(apiClient.auth.getCurrentUser()).rejects.toThrow(
          |             ^
      265 |         "Internal server error"
      266 |       );
      267 |     });

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (lib/__tests__/api.test.ts:264:13)

FAIL lib/__tests__/api-comprehensive.test.ts
  ‚óè API Client ‚Ä∫ Authentication ‚Ä∫ should include auth token in requests

    TypeError: Cannot read properties of undefined (reading '1')

      38 |
      39 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 40 |       const headers = fetchCall[1]?.headers;
         |                                ^
      41 |
      42 |       expect(fetch).toHaveBeenCalled();
      43 |       expect(headers).toBeDefined();

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:40:32)

  ‚óè API Client ‚Ä∫ Authentication ‚Ä∫ should handle requests without auth token

    TypeError: Cannot read properties of undefined (reading '1')

      59 |
      60 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 61 |       const headers = fetchCall[1]?.headers;
         |                                ^
      62 |
      63 |       let authHeader;
      64 |       if (headers instanceof Headers) {

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:61:32)

  ‚óè API Client ‚Ä∫ Authentication ‚Ä∫ should clear token on 401 response

    expect(received).toBeNull()

    Received: "mock-token"

      86 |       }
      87 |
    > 88 |       expect(apiClient.getToken()).toBeNull();
         |                                    ^
      89 |     });
      90 |   });
      91 |

      at Object.toBeNull (lib/__tests__/api-comprehensive.test.ts:88:36)

  ‚óè API Client ‚Ä∫ Error Handling ‚Ä∫ should handle network errors

    expect(received).toBe(expected) // Object.is equality

    Expected: "Network error"
    Received: "fail is not defined"

       98 |         fail("Should have thrown an error");
       99 |       } catch (error: any) {
    > 100 |         expect(error.message).toBe("Network error");
          |                               ^
      101 |       }
      102 |     });
      103 |

      at Object.toBe (lib/__tests__/api-comprehensive.test.ts:100:31)

  ‚óè API Client ‚Ä∫ Error Handling ‚Ä∫ should handle HTTP error responses

    expect(received).toBe(expected) // Object.is equality

    Expected: "Server error"
    Received: "fail is not defined"

      115 |         fail("Should have thrown an error");
      116 |       } catch (error: any) {
    > 117 |         expect(error.message).toBe("Server error");
          |                               ^
      118 |       }
      119 |     });
      120 |

      at Object.toBe (lib/__tests__/api-comprehensive.test.ts:117:31)

  ‚óè API Client ‚Ä∫ Scholarship APIs ‚Ä∫ should get all scholarships

    expect(received).toEqual(expected) // deep equality

    - Expected  - 12
    + Received  +  1

    - Array [
    -   Object {
    -     "code": "academic_excellence",
    -     "id": 1,
    -     "name": "Academic Excellence",
    -   },
    -   Object {
    -     "code": "research_grant",
    -     "id": 2,
    -     "name": "Research Grant",
    -   },
    - ]
    + Array []

      150 |
      151 |       expect(result.success).toBe(true);
    > 152 |       expect(result.data).toEqual(mockScholarships);
          |                           ^
      153 |       expect(fetch).toHaveBeenCalledWith(
      154 |         expect.stringContaining("/scholarships"),
      155 |         expect.any(Object)

      at Object.toEqual (lib/__tests__/api-comprehensive.test.ts:152:27)

  ‚óè API Client ‚Ä∫ Scholarship APIs ‚Ä∫ should get eligible scholarships

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/scholarships/eligible", Any<Object>

    Number of calls: 0

      160 |       await apiClient.scholarships.getEligible();
      161 |
    > 162 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      163 |         expect.stringContaining("/scholarships/eligible"),
      164 |         expect.any(Object)
      165 |       );

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:162:21)

  ‚óè API Client ‚Ä∫ Scholarship APIs ‚Ä∫ should get scholarship by ID

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/scholarships/1", Any<Object>

    Number of calls: 0

      169 |       await apiClient.scholarships.getById(1);
      170 |
    > 171 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      172 |         expect.stringContaining("/scholarships/1"),
      173 |         expect.any(Object)
      174 |       );

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:171:21)

  ‚óè API Client ‚Ä∫ Application APIs ‚Ä∫ should create application

    TypeError: Cannot read properties of undefined (reading '0')

      187 |
      188 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 189 |       expect(fetchCall[0]).toContain("/applications");
          |                       ^
      190 |       expect(fetchCall[1].method).toBe("POST");
      191 |       expect(fetchCall[1].body).toBe(JSON.stringify(applicationData));
      192 |     });

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:189:23)

  ‚óè API Client ‚Ä∫ Application APIs ‚Ä∫ should get user applications

    TypeError: Cannot read properties of undefined (reading '0')

      196 |
      197 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 198 |       expect(fetchCall[0]).toContain("/applications");
          |                       ^
      199 |     });
      200 |
      201 |     it("should update application", async () => {

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:198:23)

  ‚óè API Client ‚Ä∫ Application APIs ‚Ä∫ should update application

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/applications/1", ObjectContaining {"body": "{\"form_data\":{\"name\":\"Updated Name\"}}", "method": "PUT"}

    Number of calls: 0

      204 |       await apiClient.applications.updateApplication(1, updateData);
      205 |
    > 206 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      207 |         expect.stringContaining("/applications/1"),
      208 |         expect.objectContaining({
      209 |           method: "PUT",

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:206:21)

  ‚óè API Client ‚Ä∫ Application APIs ‚Ä∫ should delete application

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/applications/1", ObjectContaining {"method": "DELETE"}

    Number of calls: 0

      216 |       await apiClient.applications.deleteApplication(1);
      217 |
    > 218 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      219 |         expect.stringContaining("/applications/1"),
      220 |         expect.objectContaining({
      221 |           method: "DELETE",

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:218:21)

  ‚óè API Client ‚Ä∫ Admin APIs ‚Ä∫ should get dashboard stats

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/admin/dashboard/stats", Any<Object>

    Number of calls: 0

      229 |       await apiClient.admin.getDashboardStats();
      230 |
    > 231 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      232 |         expect.stringContaining("/admin/dashboard/stats"),
      233 |         expect.any(Object)
      234 |       );

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:231:21)

  ‚óè API Client ‚Ä∫ Admin APIs ‚Ä∫ should get all applications with filters

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/admin/applications?page=1&size=10&status=submitted", Any<Object>

    Number of calls: 0

      238 |       await apiClient.admin.getAllApplications(1, 10, "submitted");
      239 |
    > 240 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      241 |         expect.stringContaining(
      242 |           "/admin/applications?page=1&size=10&status=submitted"
      243 |         ),

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:240:21)

  ‚óè API Client ‚Ä∫ Admin APIs ‚Ä∫ should update application status

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/admin/applications/1/status", ObjectContaining {"body": "{\"status\":\"approved\",\"review_notes\":\"Looks good\"}", "method": "PATCH"}

    Number of calls: 0

      253 |       );
      254 |
    > 255 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      256 |         expect.stringContaining("/admin/applications/1/status"),
      257 |         expect.objectContaining({
      258 |           method: "PATCH",

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:255:21)

  ‚óè API Client ‚Ä∫ File APIs ‚Ä∫ should upload document

    TypeError: Cannot read properties of undefined (reading '0')

      273 |
      274 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 275 |       expect(fetchCall[0]).toContain("/applications/1/files/upload");
          |                       ^
      276 |       expect(fetchCall[0]).toContain("file_type=transcript");
      277 |       expect(fetchCall[1].method).toBe("POST");
      278 |       expect(fetchCall[1].body).toBeInstanceOf(FormData);

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:275:23)

  ‚óè API Client ‚Ä∫ File APIs ‚Ä∫ should get files by application ID

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/applications/1/files", Any<Object>

    Number of calls: 0

      282 |       await apiClient.applications.getApplicationFiles(1);
      283 |
    > 284 |       expect(fetch).toHaveBeenCalledWith(
          |                     ^
      285 |         expect.stringContaining("/applications/1/files"),
      286 |         expect.any(Object)
      287 |       );

      at Object.toHaveBeenCalledWith (lib/__tests__/api-comprehensive.test.ts:284:21)

  ‚óè API Client ‚Ä∫ Request Configuration ‚Ä∫ should set correct Content-Type for JSON requests

    TypeError: Cannot read properties of undefined (reading '1')

      297 |
      298 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 299 |       const headers = fetchCall[1]?.headers;
          |                                ^
      300 |
      301 |       let contentType;
      302 |       if (headers instanceof Headers) {

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:299:32)

  ‚óè API Client ‚Ä∫ Request Configuration ‚Ä∫ should handle FormData without explicit Content-Type header

    TypeError: Cannot read properties of undefined (reading '1')

      314 |
      315 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 316 |       const headers = fetchCall[1]?.headers;
          |                                ^
      317 |
      318 |       let contentType;
      319 |       if (headers instanceof Headers) {

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:316:32)

  ‚óè API Client ‚Ä∫ Request Configuration ‚Ä∫ should include Accept header

    TypeError: Cannot read properties of undefined (reading '1')

      330 |
      331 |       const fetchCall = (fetch as jest.Mock).mock.calls[0];
    > 332 |       const headers = fetchCall[1]?.headers;
          |                                ^
      333 |
      334 |       let acceptHeader;
      335 |       if (headers instanceof Headers) {

      at Object.<anonymous> (lib/__tests__/api-comprehensive.test.ts:332:32)

  ‚óè API Client ‚Ä∫ Response Processing ‚Ä∫ should parse successful JSON responses

    expect(received).toEqual(expected) // deep equality

    Expected: {"id": 1, "name": "Test"}
    Received: []

      355 |
      356 |       expect(result.success).toBe(true);
    > 357 |       expect(result.data).toEqual(mockData);
          |                           ^
      358 |     });
      359 |
      360 |     it("should handle empty responses", async () => {

      at Object.toEqual (lib/__tests__/api-comprehensive.test.ts:357:27)


Test Suites: 3 failed, 6 skipped, 13 passed, 16 of 22 total
Tests:       88 failed, 90 skipped, 199 passed, 377 total
Snapshots:   0 total
Time:        10.891 s, estimated 16 s
Ran all test suites.
